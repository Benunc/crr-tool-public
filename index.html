<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https:;">
    <meta name="version" content="1.1.3">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="SS_logo.png">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="CRR Scoring Tool - Transform Your Support Team">
    <meta property="og:description" content="Stop guessing. Start measuring. The only tool built specifically for Technical Support supervisors who want objective, actionable feedback on their agents' performance.">
    <meta property="og:image" content="https://crrtool.buildsustainablesupport.com/CRR_Social_share.png">
    <meta property="og:url" content="https://crrtool.buildsustainablesupport.com">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CRR Scoring Tool - Transform Your Support Team">
    <meta name="twitter:description" content="Stop guessing. Start measuring. Objective feedback for support teams.">
    <meta name="twitter:image" content="https://crrtool.buildsustainablesupport.com/CRR_Social_share.png">
    
    <title>CRR Scoring Tool - Customer Response Review Tool</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a237e;
            --primary-light: #3949ab;
            --success: #4caf50;
            --warning: #ffc107;
            --danger: #f44336;
            --gray-50: #fafafa;
            --gray-100: #f5f5f5;
            --gray-200: #eeeeee;
            --gray-300: #e0e0e0;
            --gray-600: #757575;
            --gray-800: #424242;
            --gray-900: #212121;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--gray-100);
            color: var(--gray-900);
            line-height: 1.6;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 20px 30px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            color: var(--primary);
            font-size: 28px;
            margin-bottom: 5px;
        }

        .subtitle {
            color: var(--gray-600);
            font-size: 14px;
        }

        nav {
            background: white;
            padding: 15px 30px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            background: var(--gray-100);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-800);
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: var(--gray-200);
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        .view {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .view.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--gray-800);
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            padding: 20px;
            background: var(--gray-50);
        }

        .metric-card h3 {
            color: var(--primary);
            font-size: 16px;
            margin-bottom: 10px;
        }

        .metric-card .question {
            font-size: 13px;
            color: var(--gray-600);
            font-style: italic;
            margin-bottom: 15px;
        }

        .score-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .score-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .score-btn:hover {
            border-color: var(--primary-light);
        }

        .score-btn.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .score-btn.score-1.selected {
            background: var(--danger);
            border-color: var(--danger);
        }

        .score-btn.score-3.selected {
            background: var(--success);
            border-color: var(--success);
        }

        /* Quick select styling */
        .quick-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-option:hover {
            background: var(--gray-100);
            border-color: var(--gray-300);
        }

        .quick-option input[type="checkbox"] {
            margin: 0;
            margin-right: 10px;
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .quick-option label {
            margin: 0;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            flex: 1;
        }

        .quick-option:last-child {
            margin-bottom: 0;
        }

        /* Reason option styling (matches quick-option) */
        .reason-option {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reason-option:hover {
            background: var(--gray-100);
            border-color: var(--gray-300);
        }

        .reason-option input[type="checkbox"] {
            margin: 0;
            margin-right: 10px;
            margin-top: 2px;
            width: 16px;
            height: 16px;
            min-width: 16px;
            accent-color: var(--primary);
            cursor: pointer;
            flex-shrink: 0;
        }

        .reason-option label {
            margin: 0;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            flex: 1;
            line-height: 1.4;
        }

        .reason-option:last-child {
            margin-bottom: 0;
        }

        .score-hint {
            font-size: 12px;
            color: var(--gray-600);
            line-height: 1.4;
        }


        .btn {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn:hover {
            background: var(--primary-light);
        }

        .btn-secondary {
            background: var(--gray-600);
        }

        .btn-secondary:hover {
            background: var(--gray-800);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .total-score {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }

        .total-score .number {
            font-size: 48px;
            font-weight: bold;
        }

        .total-score .label {
            font-size: 14px;
            opacity: 0.9;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        th {
            background: var(--gray-100);
            font-weight: 600;
            color: var(--gray-800);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background: var(--gray-50);
        }

        table a:hover {
            text-decoration: underline;
        }

        .score-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .score-badge.high {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .score-badge.medium {
            background: #fff9c4;
            color: #f57f17;
        }

        .score-badge.low {
            background: #ffcdd2;
            color: #c62828;
        }

        /* Total score styling - just darker/lighter with good contrast */
        .score-badge.total-high {
            background: #1a1a1a;
            color: #ffffff;
            font-weight: 600;
        }

        .score-badge.total-medium {
            background: #4a4a4a;
            color: #ffffff;
        }

        .score-badge.total-low {
            background: #757575;
            color: #ffffff;
        }

        /* Individual metric styling - red to green progression with accessible contrast */
        .score-badge.metric-danger {
            background: #ffebee;
            color: #b71c1c;
            border: 1px solid #e57373;
            font-weight: 500;
        }

        .score-badge.metric-warning {
            background: #fff8e1;
            color: #e65100;
            border: 1px solid #ffb74d;
            font-weight: 500;
        }

        .score-badge.metric-good {
            background: #e8f5e8;
            color: #1b5e20;
            border: 1px solid #81c784;
            font-weight: 500;
        }

        .score-badge.metric-excellent {
            background: #2e7d32;
            color: #ffffff;
            border: 1px solid #1b5e20;
            font-weight: 600;
        }

        /* Detailed gradient for Agent Comparison table */
        .score-badge.metric-danger-1 {
            background: #c62828;
            color: #ffffff;
            border: 1px solid #8b0000;
            font-weight: 600;
        }

        .score-badge.metric-danger-light {
            background: #e53935;
            color: #ffffff;
            border: 1px solid #c62828;
            font-weight: 500;
        }

        .score-badge.metric-warning-light {
            background: #f9a825;
            color: #ffffff;
            border: 1px solid #e65100;
            font-weight: 500;
        }

        .score-badge.metric-warning {
            background: #fb8c00;
            color: #ffffff;
            border: 1px solid #e65100;
            font-weight: 500;
        }

        .score-badge.metric-warning-dark {
            background: #ffb300;
            color: #ffffff;
            border: 1px solid #e65100;
            font-weight: 500;
        }

        .score-badge.metric-good-light {
            background: #c5e1a5;
            color: #33691e;
            border: 1px solid #9ccc65;
            font-weight: 500;
        }

        .score-badge.metric-good-medium {
            background: #aed581;
            color: #1b5e20;
            border: 1px solid #7cb342;
            font-weight: 500;
        }

        .score-badge.metric-good-dark {
            background: #689f38;
            color: #ffffff;
            border: 1px solid #558b2f;
            font-weight: 600;
        }

        .score-badge.metric-excellent-only {
            background: #2e7d32;
            color: #ffffff;
            border: 1px solid #1b5e20;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 30px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: var(--gray-50);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-card .label {
            font-size: 13px;
            color: var(--gray-600);
            margin-top: 5px;
        }

        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-bar select {
            width: auto;
            min-width: 150px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray-600);
        }

        .empty-state h3 {
            color: var(--gray-800);
            margin-bottom: 10px;
        }

        .guide-section {
            margin-bottom: 40px;
        }

        .guide-section h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 22px;
        }

        .guide-section h3 {
            color: var(--gray-800);
            margin: 20px 0 10px;
            font-size: 18px;
        }

        .scoring-table {
            margin: 20px 0;
        }

        .scoring-table td:first-child {
            font-weight: 600;
            color: var(--primary);
        }

        .example-box {
            background: var(--gray-50);
            padding: 15px;
            border-left: 4px solid var(--primary);
            margin: 15px 0;
            border-radius: 4px;
        }

        .example-box.dont {
            border-left-color: var(--danger);
        }

        .example-box.do {
            border-left-color: var(--success);
        }

        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .alert-warning {
            background: #fff9c4;
            color: #f57f17;
        }

        .red-flag {
            color: var(--danger);
            font-weight: bold;
        }

        /* Desktop: show full headers, hide mobile headers */
        .desktop-header {
            display: inline;
        }
        
        .mobile-header {
            display: none;
        }

        @media (max-width: 768px) {
            /* Mobile: hide full headers, show abbreviated */
            .desktop-header {
                display: none;
            }
            
            .mobile-header {
                display: inline;
            }

            .app-container {
                padding: 10px;
            }

            header, nav, .view {
                padding: 15px;
            }

            .form-row, .metric-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 250px;
            }

            /* Responsive tables */
            table {
                width: 100%;
                table-layout: auto;
                font-size: 11px;
            }

            th, td {
                padding: 6px 4px;
                font-size: 10px;
            }

            /* Make score columns very compact on mobile */
            table th:nth-child(4), /* Expertise */
            table th:nth-child(5), /* Ownership */
            table th:nth-child(6), /* Articulation */
            table th:nth-child(7), /* Proactiveness */
            table td:nth-child(4),
            table td:nth-child(5),
            table td:nth-child(6),
            table td:nth-child(7) {
                width: 60px;
                padding: 6px 2px;
                text-align: center;
            }

            /* Total score column */
            table th:nth-child(8),
            table td:nth-child(8) {
                width: 45px;
                padding: 6px 3px;
                text-align: center;
            }

            /* Type column - make compact */
            table th:nth-child(3),
            table td:nth-child(3) {
                width: 55px;
                padding: 6px 4px;
                font-size: 9px;
            }

            /* Date column - compact */
            table th:nth-child(1),
            table td:nth-child(1) {
                width: 70px;
                padding: 6px 4px;
                font-size: 9px;
            }

            /* Details button column - minimal */
            table th:nth-child(9),
            table td:nth-child(9) {
                width: 50px;
                padding: 6px 2px;
            }

            table td:nth-child(9) button {
                padding: 4px 8px !important;
                font-size: 10px !important;
            }

            /* Make details row wrap text properly */
            .details-row td {
                white-space: normal !important;
                word-wrap: break-word;
                padding: 10px !important;
                overflow: hidden;
            }

            /* Force details content to fit in viewport */
            .details-row td {
                width: auto !important;
            }

            .details-content h4 {
                margin-top: 0;
                margin-bottom: 8px;
                font-size: 12px;
                font-weight: 600;
            }

            .details-content p {
                font-size: 11px;
                line-height: 1.5;
                margin-bottom: 10px;
                word-break: break-word;
            }

            .details-content strong {
                display: inline;
                color: var(--primary);
                margin-right: 5px;
            }

            .details-content span {
                display: inline;
            }

            /* Make table scrollable on mobile */
            table thead {
                display: table-header-group;
            }

            table tbody {
                display: table-row-group;
            }
        }
        footer {
            background: white;
            margin-top: 30px;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            color: var(--gray-600);
            font-size: 14px;
        }

        footer .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        footer .footer-links {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        footer .footer-links a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        footer .footer-links a:hover {
            text-decoration: underline;
        }

        footer .copyright {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-200);
            font-size: 12px;
            color: var(--gray-600);
        }

        /* Enhanced Agent Dashboard Styles */
        .agent-dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gray-200);
        }

        .agent-dashboard-header h2 {
            margin: 0;
            color: var(--gray-800);
        }

        .overview-stats {
            display: flex;
            gap: 30px;
        }

        .overview-stat {
            text-align: center;
        }

        .overview-stat .value {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .overview-stat .label {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid;
        }

        .metric-card.metric-excellent-only {
            border-left-color: #059669;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .metric-card.metric-good-dark {
            border-left-color: #16a34a;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .metric-card.metric-good-medium {
            border-left-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .metric-card.metric-good-light {
            border-left-color: #4ade80;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .metric-card.metric-warning-dark {
            border-left-color: #ea580c;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }

        .metric-card.metric-warning {
            border-left-color: #f97316;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }

        .metric-card.metric-danger-light {
            border-left-color: #dc2626;
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }

        .metric-card.metric-danger-1 {
            border-left-color: #991b1b;
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }

        .metric-card .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--gray-800);
        }

        .metric-score {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--gray-800);
        }

        .metric-progress {
            margin-top: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #dc2626 0%, #f97316 50%, #22c55e 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .insights-section {
            margin: 40px 0;
        }

        .insights-section h3 {
            margin-bottom: 20px;
            color: var(--gray-800);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .insight-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .insight-card.strength {
            border-left: 4px solid #22c55e;
        }

        .insight-card.improvement {
            border-left: 4px solid #f97316;
        }

        .insight-card h4 {
            margin: 0 0 15px 0;
            font-size: 1.1rem;
        }

        .insight-card ul {
            margin: 0;
            padding-left: 20px;
        }

        .insight-card li {
            margin-bottom: 8px;
            color: var(--gray-700);
        }

        .empty-insight-state {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-top: 10px;
        }

        .empty-insight-state.success {
            border: 2px solid #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .empty-insight-state.warning {
            border: 2px solid #f97316;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }

        .empty-insight-state p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--gray-800);
            font-weight: 500;
        }

        .reason-analysis {
            margin: 40px 0;
        }

        .reason-analysis h3 {
            margin-bottom: 20px;
            color: var(--gray-800);
        }

        .reason-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .reason-tab {
            padding: 10px 20px;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .reason-tab:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .reason-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .reason-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .reason-category {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .reason-category h4 {
            margin: 0 0 10px 0;
            color: var(--gray-800);
            font-size: 1rem;
        }

        .reason-category ul {
            margin: 0;
            padding-left: 15px;
        }

        .reason-category li {
            margin-bottom: 5px;
            color: var(--gray-700);
            font-size: 0.9rem;
        }

        .empty-reason-state {
            background: white;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .empty-reason-state.success {
            border-left: 4px solid #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .empty-reason-state.warning {
            border-left: 4px solid #f97316;
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
        }

        .empty-reason-state.neutral {
            border-left: 4px solid #6b7280;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
        }

        .empty-reason-state p {
            margin: 0;
            font-size: 1.1rem;
            color: var(--gray-800);
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .agent-dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .overview-stats {
                gap: 20px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }

            .reason-grid {
                grid-template-columns: 1fr;
            }

            .reason-tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- DEMO VERSION BANNER -->
    <div id="demo-banner" style="
        position: fixed; 
        top: 0; 
        left: 0; 
        right: 0; 
        background: linear-gradient(90deg, #ff6b6b, #4ecdc4); 
        color: white; 
        text-align: center; 
        padding: 8px; 
        font-weight: bold; 
        z-index: 10001;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    ">
        ðŸŽ­ DEMO VERSION - <a href="https://benlikes.us/crrtool-fromdemo" style="color: white; text-decoration: underline;">Get Full Version for $25</a> ðŸš€
    </div>
    <style>
        body { padding-top: 40px; }
    </style>
    <div class="app-container">
        <header>
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                <img src="SS_logo.png" alt="Sustainable Support Logo" style="height: 40px; width: auto; border-radius: 4px;">
                <div>
                    <h1 style="margin: 0; font-size: 28px;">CRR Scoring Tool</h1>
                    <p class="subtitle" style="margin: 5px 0 0 0; font-size: 14px;">Customer Response Review Tool - Based on the methodology in "Sustainable Support" by Ben Meredith</p>
                </div>
            </div>
        </header>

        <nav>
            <button class="nav-btn active" onclick="showView('score-entry', this)">New CRR</button>
            <button class="nav-btn" onclick="showView('all-reviews', this)">All Reviews</button>
            <button class="nav-btn" onclick="showView('agent-dashboard', this)">Agent Dashboard</button>
            <button class="nav-btn" onclick="showView('team-overview', this)">Team Overview</button>
            <button class="nav-btn" onclick="showView('scoring-guide', this)">Scoring Guide</button>
            <button class="nav-btn" onclick="showView('settings', this)">Settings</button>
            <button class="nav-btn" onclick="showView('license', this)">License</button>
        </nav>

        <!-- Score Entry View -->
        <div id="score-entry" class="view active">
            <h2>New Customer Response Review</h2>
            <form id="crr-form" onsubmit="saveCRR(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="review-date">Date</label>
                        <input type="date" id="review-date" required>
                    </div>
                    <div class="form-group">
                        <label for="agent-name">Agent Name</label>
                        <select id="agent-name" required onchange="autoFillSupervisor()">
                            <option value="">Select Agent...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="supervisor-name">Supervisor <span style="font-size: 12px; color: var(--gray-600);">(auto-filled)</span></label>
                        <select id="supervisor-name" required>
                            <option value="">Select Supervisor...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="interaction-type">Interaction Type</label>
                        <select id="interaction-type" required>
                            <option value="Ticket">Ticket</option>
                            <option value="Chat">Chat</option>
                            <option value="Call">Call</option>
                            <option value="Bot Response">Bot Response</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="interaction-link">Link to Interaction</label>
                    <input type="url" id="interaction-link" placeholder="https://support.example.com/ticket/12345" required>
                </div>

                <h3 style="margin: 30px 0 20px; color: var(--primary);">Score the 4 Metrics</h3>
                
                <div class="metric-grid">
                    <!-- Expertise -->
                    <div class="metric-card">
                        <h3>1. Expertise</h3>
                        <p class="question">Do they demonstrate technical grasp of the problem and surrounding issues?</p>
                        <div class="score-buttons">
                            <button type="button" class="score-btn score-1" onclick="selectScore('expertise', 1)">1</button>
                            <button type="button" class="score-btn score-2" onclick="selectScore('expertise', 2)">2</button>
                            <button type="button" class="score-btn score-3" onclick="selectScore('expertise', 3)">3</button>
                        </div>
                        <p class="score-hint" id="expertise-hint">Select a score</p>
                        <input type="hidden" id="expertise-score" required>
                        <div id="expertise-feedback-container" style="display: none; margin-top: 15px;">
                            <div id="expertise-quick-options" style="display: none; margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);">
                                <p style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--gray-700);">Quick select (optional):</p>
                            </div>
                            <!-- Reason checkboxes (dynamically populated) -->
                            <div id="expertise-reasons-1" data-score="1" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="expertise-reasons-2" data-score="2" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="expertise-reasons-3" data-score="3" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <label for="expertise-feedback" id="expertise-feedback-label" style="font-size: 13px; margin-bottom: 5px; display: block;"></label>
                            <textarea id="expertise-feedback" style="width: 100%; min-height: 60px; font-size: 13px; padding: 8px; border: 1px solid var(--gray-300); border-radius: 4px;"></textarea>
                        </div>
                    </div>

                    <!-- Ownership -->
                    <div class="metric-card">
                        <h3>2. Ownership</h3>
                        <p class="question">Do they avoid passing off responsibility to others?</p>
                        <div class="score-buttons">
                            <button type="button" class="score-btn score-1" onclick="selectScore('ownership', 1)">1</button>
                            <button type="button" class="score-btn score-2" onclick="selectScore('ownership', 2)">2</button>
                            <button type="button" class="score-btn score-3" onclick="selectScore('ownership', 3)">3</button>
                        </div>
                        <p class="score-hint" id="ownership-hint">Select a score</p>
                        <input type="hidden" id="ownership-score" required>
                        <div id="ownership-feedback-container" style="display: none; margin-top: 15px;">
                            <div id="ownership-quick-options" style="display: none; margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);">
                                <p style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--gray-700);">Quick select (optional):</p>
                            </div>
                            <!-- Reason checkboxes (dynamically populated) -->
                            <div id="ownership-reasons-1" data-score="1" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="ownership-reasons-2" data-score="2" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="ownership-reasons-3" data-score="3" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <label for="ownership-feedback" id="ownership-feedback-label" style="font-size: 13px; margin-bottom: 5px; display: block;"></label>
                            <textarea id="ownership-feedback" style="width: 100%; min-height: 60px; font-size: 13px; padding: 8px; border: 1px solid var(--gray-300); border-radius: 4px;"></textarea>
                        </div>
                    </div>

                    <!-- Articulation -->
                    <div class="metric-card">
                        <h3>3. Articulation</h3>
                        <p class="question">Do they communicate clearly with helpful tone and attention to detail?</p>
                        <div class="score-buttons">
                            <button type="button" class="score-btn score-1" onclick="selectScore('articulation', 1)">1</button>
                            <button type="button" class="score-btn score-2" onclick="selectScore('articulation', 2)">2</button>
                            <button type="button" class="score-btn score-3" onclick="selectScore('articulation', 3)">3</button>
                        </div>
                        <p class="score-hint" id="articulation-hint">Select a score</p>
                        <input type="hidden" id="articulation-score" required>
                        <div id="articulation-feedback-container" style="display: none; margin-top: 15px;">
                            <div id="articulation-quick-options" style="display: none; margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);">
                                <p style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--gray-700);">Quick select (optional):</p>
                            </div>
                            <!-- CREW items (dynamically populated) -->
                            <div id="articulation-reasons-1" data-score="1" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="articulation-reasons-2" data-score="2" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="articulation-reasons-3" data-score="3" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <label for="articulation-feedback" id="articulation-feedback-label" style="font-size: 13px; margin-bottom: 5px; display: block;"></label>
                            <textarea id="articulation-feedback" style="width: 100%; min-height: 60px; font-size: 13px; padding: 8px; border: 1px solid var(--gray-300); border-radius: 4px;"></textarea>
                        </div>
                    </div>

                    <!-- Proactiveness -->
                    <div class="metric-card">
                        <h3>4. Proactiveness</h3>
                        <p class="question">Do they utilize opportunities to maximize long-term benefits?</p>
                        <div class="score-buttons">
                            <button type="button" class="score-btn score-1" onclick="selectScore('proactiveness', 1)">1</button>
                            <button type="button" class="score-btn score-2" onclick="selectScore('proactiveness', 2)">2</button>
                            <button type="button" class="score-btn score-3" onclick="selectScore('proactiveness', 3)">3</button>
                        </div>
                        <p class="score-hint" id="proactiveness-hint">Select a score</p>
                        <input type="hidden" id="proactiveness-score" required>
                        <div id="proactiveness-feedback-container" style="display: none; margin-top: 15px;">
                            <div id="proactiveness-quick-options" style="display: none; margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);">
                                <p style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--gray-700);">Quick select (optional):</p>
                            </div>
                            <!-- Reason checkboxes (dynamically populated) -->
                            <div id="proactiveness-reasons-1" data-score="1" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="proactiveness-reasons-2" data-score="2" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <div id="proactiveness-reasons-3" data-score="3" style="display: none; margin-bottom: 15px; padding: 10px; background: white; border-radius: 4px; border: 1px solid var(--gray-300);"></div>
                            <label for="proactiveness-feedback" id="proactiveness-feedback-label" style="font-size: 13px; margin-bottom: 5px; display: block;"></label>
                            <textarea id="proactiveness-feedback" style="width: 100%; min-height: 60px; font-size: 13px; padding: 8px; border: 1px solid var(--gray-300); border-radius: 4px;"></textarea>
                        </div>
                    </div>
                </div>

                <div id="total-score-display" class="total-score" style="display: none;">
                    <div class="number" id="total-score-number">0</div>
                    <div class="label">Total Score (out of 12)</div>
                </div>


                <div class="btn-group">
                    <button type="submit" class="btn">Save CRR</button>
                    <button type="button" class="btn btn-secondary" onclick="resetForm()">Clear Form</button>
                </div>
            </form>
        </div>

        <!-- All Reviews View -->
        <div id="all-reviews" class="view">
            <h2>All Customer Response Reviews</h2>
            <div class="filter-bar">
                <select id="filter-agent" onchange="filterReviews()">
                    <option value="">All Agents</option>
                </select>
                <select id="filter-supervisor" onchange="filterReviews()">
                    <option value="">All Supervisors</option>
                </select>
                <select id="filter-type" onchange="filterReviews()">
                    <option value="">All Types</option>
                    <option value="Ticket">Ticket</option>
                    <option value="Chat">Chat</option>
                    <option value="Call">Call</option>
                    <option value="Bot Response">Bot Response</option>
                </select>
                <button class="btn btn-secondary" onclick="showDemoRestriction('export')">Export Data</button>
                <button class="btn btn-secondary" onclick="showDemoRestriction('googleSheets')">Copy to Google Sheets</button>
                <button class="btn btn-secondary" onclick="showDemoRestriction('import')">Import Data</button>
            </div>
            <div id="reviews-table-container"></div>
        </div>

        <!-- Agent Dashboard View -->
        <div id="agent-dashboard" class="view">
            <h2>Agent Dashboard</h2>
            <div class="form-group" style="max-width: 300px;">
                <label for="dashboard-agent">Select Agent</label>
                <select id="dashboard-agent" onchange="updateAgentDashboard()">
                    <option value="">Select Agent...</option>
                </select>
            </div>
            <div id="agent-dashboard-content"></div>
        </div>

        <!-- Team Overview View -->
        <div id="team-overview" class="view">
            <h2>Team Overview</h2>
            <div id="team-overview-content"></div>
        </div>

        <!-- Scoring Guide View -->
        <div id="scoring-guide" class="view">
            <h2>Scoring Guide</h2>
            
            <div class="guide-section">
                <h3>Understanding the 3-Point Scale</h3>
                <table class="scoring-table">
                    <tr>
                        <th>Score</th>
                        <th>Meaning</th>
                        <th>What It Communicates</th>
                    </tr>
                    <tr>
                        <td><span class="score-badge low">1</span></td>
                        <td><strong>Problem</strong></td>
                        <td>Agent should feel nervous. Keep getting 1s and disciplinary action may follow. Not good enough.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge medium">2</span></td>
                        <td><strong>Acceptable</strong></td>
                        <td>No nervousness needed. Keep getting 2s and all is well. It's good enough.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge high">3</span></td>
                        <td><strong>Exemplary</strong></td>
                        <td>Agent should be proud. Keep getting 3s and you're positioning for raises/promotions.</td>
                    </tr>
                </table>
            </div>

            <div class="guide-section">
                <h2>The 4 Core Metrics</h2>

                <h3>1. Expertise</h3>
                <p><em>Question: "Do they demonstrate technical grasp of the problem and surrounding issues to the user?"</em></p>
                <table class="scoring-table">
                    <tr>
                        <td><span class="score-badge low">1</span></td>
                        <td>Agent doesn't demonstrate knowledge of the product or how to solve the issue. User is left uncertain if agent can help.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge medium">2</span></td>
                        <td>Agent shows basic competence. User feels the agent knows the product.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge high">3</span></td>
                        <td>Agent positions themselves as an expert. User is confident the agent is highly knowledgeable AND willing to share that knowledge. Projects confidence even when uncertain.</td>
                    </tr>
                </table>
                <p><strong>Quick Tip:</strong> Confidence is key. Even if not sure of the exact problem, demonstrate confidence that once isolated, it will be fixed.</p>

                <h3>2. Ownership</h3>
                <p><em>Question: "Do they avoid passing off responsibility to others to solve the problem?"</em></p>
                <table class="scoring-table">
                    <tr>
                        <td><span class="score-badge low">1</span></td>
                        <td>Agent passes the buck to other support desks or makes user do the work without proper guidance. User feels abandoned.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge medium">2</span></td>
                        <td>Agent takes basic responsibility for the interaction and follows through.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge high">3</span></td>
                        <td>Agent acts as ambassador navigating between products/support desks. User feels the agent will not stop until problem is resolved.</td>
                    </tr>
                </table>
                <p><strong>Quick Tip:</strong> Goal is resolution, not just "bug reported." Communicate timelines, give workarounds, ensure user has an immediate plan.</p>

                <h3>3. Articulation</h3>
                <p><em>Question: "Do they communicate clearly, with helpful tone, and attention to detail?"</em></p>
                <table class="scoring-table">
                    <tr>
                        <td><span class="score-badge low">1</span></td>
                        <td>Unclear communication, poor tone, or missing details. User is confused or frustrated.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge medium">2</span></td>
                        <td>Clear, professional communication. User understands next steps.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge high">3</span></td>
                        <td>Nails the tone (CREW), pays attention to word choices, asks clarifying questions. User feels they have a wise friend at the company.</td>
                    </tr>
                </table>
                <p><strong>Quick Tip:</strong> Agents aren't robots. Use humor, personalization, and clarity. Small touches matter.</p>

                <h3>4. Proactiveness</h3>
                <p><em>Question: "Do they utilize all opportunities to maximize long-term benefits of this interaction?"</em></p>
                <table class="scoring-table">
                    <tr>
                        <td><span class="score-badge low">1</span></td>
                        <td>Missed opportunity to improve documentation, product, or processes. Only solved immediate problem.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge medium">2</span></td>
                        <td>Solved the problem effectively.</td>
                    </tr>
                    <tr>
                        <td><span class="score-badge high">3</span></td>
                        <td>Found something to make the company/product/documentation better. Prevented others from having the same problem. User feels they're the agent's secret weapon to improve the product.</td>
                    </tr>
                </table>
                <p><strong>Quick Tip:</strong> Every interaction can improve something. Taking 2 extra minutes to thank customer for helping improve the product can turn a refund into a 5-star review.</p>
            </div>

            <div class="guide-section">
                <h2>CREW Tone Framework</h2>
                
                <h3>C - Confident, not Apologetic</h3>
                <p>We are proud of our product and don't apologize for things that are not our fault. Lead with confidence.</p>
                <div class="example-box dont">
                    <strong>âŒ Don't Say:</strong> "So sorry you're experiencing this!"
                </div>
                <div class="example-box do">
                    <strong>âœ… Do Say:</strong> "I can help with that!"
                </div>
                <p><strong>Apologize for:</strong> Slow response time, team mistakes</p>
                <p><strong>Don't Apologize for:</strong> Bugs, theme conflicts, lack of features, things outside your control</p>

                <h3>R - Results Oriented, not Argumentative</h3>
                <p>Don't respond to frustration with defense. Focus on solving the problem.</p>
                <div class="example-box dont">
                    <strong>âŒ Don't Say:</strong> "Actually we're quite competent. I have a degree in..."
                </div>
                <div class="example-box do">
                    <strong>âœ… Do Say:</strong> "I'm happy to get to the bottom of this with you. Here are the steps..."
                </div>

                <h3>E - Educational, not Haughty or Overly Technical</h3>
                <p>Explain clearly without jargon. If you can't explain it to a 10-year-old, rewrite it.</p>
                <div class="example-box dont">
                    <strong>âŒ Don't Say:</strong> "The jQuery error in the header is throwing a script conflict preventing DOM manipulation"
                </div>
                <div class="example-box do">
                    <strong>âœ… Do Say:</strong> "A file loaded by X plugin isn't playing nicely with our file, preventing the form from loading correctly. Here's how to fix it..."
                </div>

                <h3>W - Welcoming, not Thankful</h3>
                <p>Skip generic "thanks for contacting us." Lead with excitement or personalization.</p>
                <div class="example-box dont">
                    <strong>âŒ Don't Say:</strong> "Thanks for contacting support"
                </div>
                <div class="example-box do">
                    <strong>âœ… Do Say:</strong> "You've come to the right place - we'll get this sorted in no time!"
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settings" class="view">
            <h2>Settings</h2>
            
            <div class="guide-section">
                <h3>Agent Roster</h3>
                <p style="font-size: 14px; color: var(--gray-600); margin-bottom: 15px;">Assign each agent to their supervisor. This will auto-fill when scoring CRRs.</p>
                <div id="agents-list"></div>
                <div class="form-row" style="margin-top: 15px;">
                    <input type="text" id="new-agent-name" placeholder="New agent name" style="flex: 2;">
                    <select id="new-agent-supervisor" style="flex: 1;">
                        <option value="">Select supervisor...</option>
                    </select>
                    <button class="btn" onclick="addAgent()">Add Agent</button>
                </div>
            </div>

            <div class="guide-section">
                <h3>Supervisor List</h3>
                <div id="supervisors-list"></div>
                <div class="form-row" style="margin-top: 15px;">
                    <input type="text" id="new-supervisor-name" placeholder="New supervisor name">
                    <button class="btn" onclick="addSupervisor()">Add Supervisor</button>
                </div>
            </div>

            <div class="guide-section">
                <h3>Data Management</h3>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="showDemoRestriction('export')">Export All Data</button>
                    <button class="btn btn-secondary" onclick="showDemoRestriction('import')">Import Data (JSON)</button>
                    <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                </div>
            </div>

            <div class="guide-section">
                <h3>Sample Data</h3>
                <p>Load sample CRRs to see how the tool works.</p>
                <button class="btn btn-secondary" onclick="loadSampleData()">Load Sample Data</button>
            </div>
        </div>

        <!-- License View -->
        <div id="license" class="view">
            <h2>Software License Agreement</h2>
            
            <div class="guide-section" style="max-width: 900px;">
                <h3 style="color: var(--primary); margin-bottom: 20px;">PROPRIETARY SOFTWARE LICENSE</h3>
                
                <div style="background: var(--gray-50); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <p style="margin: 0;"><strong>CRR Scoring Tool - Customer Response Review Tool</strong></p>
                    <p style="margin: 5px 0;">Copyright Â© 2025 BenandJacq, INC.</p>
                    <p style="margin: 5px 0;">State of South Carolina, United States</p>
                    <p style="margin: 10px 0 0 0; font-weight: 600;">ALL RIGHTS RESERVED</p>
                </div>

                <div style="line-height: 1.8; color: var(--gray-800);">
                    <h4 style="color: var(--primary); margin-top: 25px;">ABOUT THIS SOFTWARE</h4>
                    <p>This software and associated documentation files (the "Software") are proprietary and confidential information of BenandJacq, INC ("Licensor"). The Software is protected by copyright laws and international copyright treaties, as well as other intellectual property laws and treaties.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">GRANT OF LICENSE</h4>
                    <p>Subject to the terms and conditions of this Agreement, Licensor grants you a limited, non-exclusive, non-transferable, revocable license to use the Software for your personal or internal business purposes only.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">RESTRICTIONS</h4>
                    <p style="margin-bottom: 10px;"><strong>You may NOT:</strong></p>
                    <ul style="margin-left: 25px; line-height: 1.8;">
                        <li>Copy, modify, or create derivative works of the Software</li>
                        <li>Distribute, sell, rent, lease, or sublicense the Software</li>
                        <li>Reverse engineer, decompile, or disassemble the Software</li>
                        <li>Remove or alter any copyright, trademark, or other proprietary notices</li>
                        <li>Share your license with others or use it on multiple devices simultaneously</li>
                        <li>Use the Software to provide services to third parties</li>
                        <li>Redistribute the Software in any form without written consent from BenandJacq, INC</li>
                    </ul>

                    <h4 style="color: var(--primary); margin-top: 25px;">OWNERSHIP</h4>
                    <p>BenandJacq, INC retains all right, title, and interest in and to the Software, including all intellectual property rights therein. This Agreement does not grant you any ownership rights to the Software.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">TERM AND TERMINATION</h4>
                    <p>This license is effective until terminated. Your rights under this license will terminate automatically without notice from BenandJacq, INC if you fail to comply with any term(s) of this Agreement. Upon termination, you must cease all use of the Software and destroy all copies in your possession.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">WARRANTY DISCLAIMER</h4>
                    <p style="font-style: italic; background: var(--warning); padding: 15px; border-radius: 6px; color: var(--gray-900);">THE SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT. BENANDJACQ, INC DOES NOT WARRANT THAT THE SOFTWARE WILL BE ERROR-FREE OR UNINTERRUPTED.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">LIMITATION OF LIABILITY</h4>
                    <p>IN NO EVENT SHALL BENANDJACQ, INC BE LIABLE FOR ANY SPECIAL, INCIDENTAL, INDIRECT, OR CONSEQUENTIAL DAMAGES WHATSOEVER (INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS, BUSINESS INTERRUPTION, LOSS OF BUSINESS INFORMATION, OR ANY OTHER PECUNIARY LOSS) ARISING OUT OF THE USE OF OR INABILITY TO USE THIS SOFTWARE, EVEN IF BENANDJACQ, INC HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">REFUND POLICY</h4>
                    <p>A 10-day money-back guarantee is provided from the date of purchase. To request a refund, contact <a href="mailto:team@buildsustainablesupport.com" style="color: var(--primary);">team@buildsustainablesupport.com</a> within 10 days of purchase.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">GOVERNING LAW</h4>
                    <p>This Agreement shall be governed by and construed in accordance with the laws of the State of South Carolina, United States, without regard to its conflict of law provisions.</p>

                    <h4 style="color: var(--primary); margin-top: 25px;">CONTACT INFORMATION</h4>
                    <p>For questions about this license or to request written consent for redistribution:</p>
                    <div style="background: var(--gray-50); padding: 15px; border-radius: 6px; margin-top: 10px;">
                        <p style="margin: 5px 0;"><strong>BenandJacq, INC</strong></p>
                        <p style="margin: 5px 0;">Email: <a href="mailto:team@buildsustainablesupport.com" style="color: var(--primary);">team@buildsustainablesupport.com</a></p>
                        <p style="margin: 5px 0;">Website: <a href="https://buildsustainablesupport.com" target="_blank" style="color: var(--primary);">buildsustainablesupport.com</a></p>
                    </div>

                    <div style="background: var(--primary); color: white; padding: 20px; border-radius: 8px; margin-top: 30px; text-align: center;">
                        <p style="margin: 0; font-weight: 600;">BY USING THIS SOFTWARE, YOU ACKNOWLEDGE THAT YOU HAVE READ THIS AGREEMENT, UNDERSTAND IT, AND AGREE TO BE BOUND BY ITS TERMS AND CONDITIONS.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Security: Input sanitization functions
        // ðŸ”’ Ooh, look at you trying to reverse engineer this! 
        // ðŸ•µï¸â€â™‚ï¸ You're like a digital detective, but without the paycheck! ðŸ’¸
        // ðŸ’¡ Pro tip: It's easier to just buy the product than to hack it! ðŸ›’
        // ðŸŽ­ But hey, if you're having fun, keep going! Just... maybe buy it too? ðŸ˜…
        function sanitizeHTML(str) {
            if (typeof str !== 'string') return '';
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function validateInput(input, maxLength = 100) {
            if (typeof input !== 'string') return '';
            // Remove potentially dangerous characters and limit length
            return input.slice(0, maxLength).replace(/[<>'"&]/g, '');
        }

        function validateFeedback(input, maxLength = 1000) {
            if (typeof input !== 'string') return '';
            // For feedback, allow quotes but remove script-dangerous chars
            return input.slice(0, maxLength).replace(/[<>&]/g, '');
        }

        function safeInnerHTML(element, content) {
            // Use textContent for safety, or sanitize if HTML is needed
            if (typeof content === 'string') {
                element.innerHTML = sanitizeHTML(content);
            } else {
                element.innerHTML = content;
            }
        }

        // Data storage
        // ðŸ•µï¸ Hey there, curious developer! ðŸ‘‹
        // ðŸ‘€ I see you're snooping around the source code...
// ðŸ’° This feature costs money, but you knew that, right? ðŸ˜
        // ðŸ¤” Maybe you should just buy the full version instead? ðŸ’°
        // ðŸš€ It's only $25 and you get ALL the features!
        // ðŸ“§ Contact: team@buildsustainablesupport.com
        // ðŸŽ¯ Or just stop being cheap and buy it already! ðŸ˜
        let crrData = JSON.parse(localStorage.getItem('crrData')) || [];
        let agents = JSON.parse(localStorage.getItem('agents')) || [];
        let supervisors = JSON.parse(localStorage.getItem('supervisors')) || [];
        // Agent-Supervisor associations: { agentName: supervisorName }
        let agentSupervisors = JSON.parse(localStorage.getItem('agentSupervisors')) || {};
        // Track currently filtered/displayed data for exports
        let currentFilteredData = [];

        // Score hints
        const scoreHints = {
            expertise: {
                1: 'âŒ No demonstration of product knowledge',
                2: 'âœ“ Shows basic competence',
                3: 'âœ… Positions as expert, projects confidence'
            },
            ownership: {
                1: 'âŒ Passes buck, user feels abandoned',
                2: 'âœ“ Takes responsibility, follows through',
                3: 'âœ… Acts as ambassador, won\'t stop until resolved'
            },
            articulation: {
                1: 'âŒ Unclear, poor tone, missing details',
                2: 'âœ“ Clear, professional communication',
                3: 'âœ… Nails tone, personalizes, wise friend'
            },
            proactiveness: {
                1: 'âŒ Missed improvement opportunity',
                2: 'âœ“ Solved problem effectively',
                3: 'âœ… Improved docs/product/process, prevented future issues'
            }
        };

        // Quick feedback options from the book
        const quickOptions = {
            expertise: {
                1: [
                    { id: 'no-product-knowledge', label: 'Wrong answer', text: 'Gave factually incorrect information' },
                    { id: 'lacked-confidence', label: 'Confused', text: 'Confused about the issue or solution' }
                ],
                3: [
                    { id: 'expert-positioned', label: 'Expert positioning', text: 'Positioned themselves as an expert; user confident in their knowledge' },
                    { id: 'projected-confidence', label: 'Projected confidence', text: 'Projected confidence even when uncertain; assured user issue would be resolved once isolated' }
                ]
            },
            ownership: {
                1: [
                    { id: 'passed-buck', label: 'Passed buck', text: 'Passed the customer to another support desk without proper context or guidance' },
                    { id: 'user-abandoned', label: 'Abandoned user', text: 'User felt abandoned; did not follow through to resolution' }
                ],
                3: [
                    { id: 'ambassador-role', label: 'Ambassador', text: 'Acted as ambassador between products/teams; navigated conflict for the user' },
                    { id: 'workarounds-timeline', label: 'Workarounds + timeline', text: 'Provided workarounds and clear timeline; communicated plan even before full resolution' }
                ]
            },
            articulation: {
                1: [
                    { id: 'unclear-communication', label: 'Unclear', text: 'Unclear communication or confusing explanations; user left uncertain' },
                    { id: 'technical-jargon', label: 'Too technical', text: 'Used excessive technical jargon; did not explain in terms user could understand' },
                    { id: 'led-with-apology', label: 'Led with apology', text: 'Led with apologies instead of confidence; set wrong tone from the start' }
                ],
                3: [
                    { id: 'perfect-tone', label: 'Perfect tone', text: 'Perfect tone - confident, results-oriented, educational, and welcoming' },
                    { id: 'personalized-clear', label: 'Personalized', text: 'Personalized response with clear explanations; user felt they had a wise friend' },
                    { id: 'humor-warmth', label: 'Humor/warmth', text: 'Used appropriate humor and warmth; made technical simple without being condescending' }
                ]
            },
            proactiveness: {
                1: [
                    { id: 'missed-doc-opportunity', label: 'Docs', text: 'Missed opportunity to improve or suggest documentation updates' },
                    { id: 'only-solved-immediate', label: 'Happy, no review', text: 'The user was happy, but we didn\'t ask for a review' }
                ],
                3: [
                    { id: 'improved-docs', label: 'Docs', text: 'Improved documentation and linked to it.' },
                    { id: 'escalated-issue', label: 'Asked for review', text: 'Asked for a review' },
                    { id: 'prevented-future', label: 'Internal convo', text: 'Advocated for the user to the product team.' }
                ]
            }
        };

        // Granular metric reasons - structured by score for each metric
        const metricReasons = {
            expertise: {
                1: [
                    { id: 'incorrectAnswer', text: 'Gave an incorrect or inaccurate answer' },
                    { id: 'lackOfCuriosity', text: 'Failed to research/investigate the problem' },
                    { id: 'unclearSteps', text: 'Didn\'t provide clear steps to resolve the issue' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                2: [
                    { id: 'accurateAnswer', text: 'Provided accurate technical answer' },
                    { id: 'showedConfidence', text: 'Showed confidence in their knowledge' },
                    { id: 'clearedItUp', text: 'Explained resolution steps clearly' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                3: [
                    { id: 'demonstratedAccuracy', text: 'Demonstrated exemplary technical knowledge' },
                    { id: 'projectedConfidence', text: 'Projected confidence throughout interaction' },
                    { id: 'providedClearSteps', text: 'Provided over-the-top clear, logical steps to resolution' },
                    { id: 'proactivelyLearned', text: 'Proactively researched/learned beyond standard knowledge' },
                    { id: 'other', text: 'Other (describe below)' }
                ]
            },
            ownership: {
                1: [
                    { id: 'abandonedCustomer', text: 'Passed off to another team with no context/help' },
                    { id: 'overloadedCustomer', text: 'Made customer do work the agent should handle' },
                    { id: 'missedRealIssue', text: 'Solved the wrong problem entirely' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                2: [
                    { id: 'tookResponsibility', text: 'Took responsibility for the issue' },
                    { id: 'followedThrough', text: 'Followed through to a resolution' },
                    { id: 'clearedPath', text: 'Clearly explained next steps to customer' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                3: [
                    { id: 'navigatedTeams', text: 'Expertly navigated between teams/departments' },
                    { id: 'ensuredResolution', text: 'Ensured actual resolution (not just escalation)' },
                    { id: 'proactivelyHandled', text: 'Proactively resolved issues beyond core request' },
                    { id: 'identifiedRootCause', text: 'Identified and addressed the root cause' },
                    { id: 'other', text: 'Other (describe below)' }
                ]
            },
            proactiveness: {
                1: [
                    { id: 'noDocumentation', text: 'Didn\'t link to or mention relevant documentation' },
                    { id: 'noCustomerFeedback', text: 'Didn\'t ask for feedback from a satisfied customer' },
                    { id: 'skippedClosure', text: 'Didn\'t follow the established closure procedure' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                2: [
                    { id: 'mentionedResources', text: 'Mentioned relevant resources or documentation' },
                    { id: 'closedProperly', text: 'Followed the closure procedure' },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                3: [
                    { id: 'linkedDocs', text: 'Perfectly linked to/mentioned updated relevant documentation' },
                    { id: 'requestedReview', text: 'Proactively requested review/testimonial from happy customer' },
                    { id: 'exemplaryClosure', text: 'Followed established procedure with extra attention to detail' },
                    { id: 'escalatedProperly', text: 'Identified issue for product/dev team escalation' },
                    { id: 'other', text: 'Other (describe below)' }
                ]
            },
            articulation: {
                1: [
                    { id: 'confident', text: 'Confident: Sounded unsure, unprofessional, or apologetic', crew: true },
                    { id: 'resultsOriented', text: 'Results-Oriented: Got distracted or defensive. Didn\'t focus on solving the problem', crew: true },
                    { id: 'educational', text: 'Educational: Used too much jargon or was condescending', crew: true },
                    { id: 'welcoming', text: 'Welcoming: Sounded cold, formal, or made customer feel rushed', crew: true },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                2: [
                    { id: 'confident', text: 'Confident: Sounded professional and assured', crew: true },
                    { id: 'resultsOriented', text: 'Results-Oriented: Stayed focused on solving the problem', crew: true },
                    { id: 'educational', text: 'Educational: Explained things without too much jargon', crew: true },
                    { id: 'welcoming', text: 'Welcoming: Sounded friendly and approachable', crew: true },
                    { id: 'other', text: 'Other (describe below)' }
                ],
                3: [
                    { id: 'confident', text: 'Confident: Projected confidence & professionalism throughout', crew: true },
                    { id: 'resultsOriented', text: 'Results-Oriented: Exemplary avoidance of arguing, laser-focused on solving', crew: true },
                    { id: 'educational', text: 'Educational: Explained everything clearly without jargon', crew: true },
                    { id: 'welcoming', text: 'Welcoming: Warm, personable, made customer feel heard and valued', crew: true },
                    { id: 'other', text: 'Other (describe below)' }
                ]
            }
        };
        // Helper function to get current score for a metric
        function getCurrentScore(metric) {
            return parseInt(document.getElementById(`${metric}-score`).value) || 0;
        }

        // Helper function to get checked reasons from checkboxes
        function getCheckedReasons(metric) {
            const reasons = [];
            const score = getCurrentScore(metric);
            const reasonCheckboxes = document.querySelectorAll(`#${metric}-reasons-${score} input[type="checkbox"]`);
            reasonCheckboxes.forEach(cb => {
                if (cb.checked) {
                    reasons.push(cb.value);
                }
            });
            return reasons;
        }

        // Helper function to get display text for checked reasons
        function getCheckedReasonsText(metric) {
            const text = [];
            const score = getCurrentScore(metric);
            const reasonsList = metricReasons[metric][score];
            if (!reasonsList) return text;
            
            const reasonCheckboxes = document.querySelectorAll(`#${metric}-reasons-${score} input[type="checkbox"]`);
            reasonCheckboxes.forEach(cb => {
                if (cb.checked && reasonsList) {
                    const reason = reasonsList.find(r => r.id === cb.value);
                    if (reason) text.push(reason.text);
                }
            });
            return text;
        }

        // Render reason checkboxes for a specific score
        function renderReasonCheckboxes(metric, score) {
            const container = document.getElementById(`${metric}-reasons-${score}`);
            if (!container) return;
            
            const reasons = metricReasons[metric][score];
            if (!reasons) {
                container.innerHTML = '';
                return;
            }

            // Determine label text based on metric and score
            let labelText = '';
            if (score === 1) {
                labelText = metric === 'articulation' ? 'Which CREW standard(s) did they fail to meet:' : 'What went wrong?';
            } else if (score === 2) {
                labelText = metric === 'articulation' ? 'Which CREW standard(s) did they meet:' : 'What did they do well?';
            } else if (score === 3) {
                labelText = metric === 'articulation' ? 'Which CREW standard(s) did they excel at:' : 'What made it exemplary?';
            }

            let html = `<p style="font-weight: 600; margin-bottom: 10px; font-size: 13px;">${labelText}</p>`;
            
            reasons.forEach(reason => {
                html += `
                    <div class="reason-option">
                        <input 
                            type="checkbox" 
                            id="${metric}-reason-${reason.id}" 
                            name="${metric}-reasons" 
                            value="${reason.id}"
                            data-metric="${metric}"
                            data-score="${score}"
                            onchange="onReasonCheckboxChange('${metric}')"
                        >
                        <label for="${metric}-reason-${reason.id}">${reason.text}</label>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Handle reason checkbox changes
        function onReasonCheckboxChange(metric) {
            // Could add validation or auto-update feedback here in the future
        }
        // Initialize app
        function init() {
            // Set today's date
            document.getElementById('review-date').valueAsDate = new Date();
            
            // Populate dropdowns
            updateDropdowns();
            updateSettingsLists();
            
            // Prompt for sample data if no data exists
            if (crrData.length === 0 && !localStorage.getItem('initialSetupComplete')) {
                setTimeout(() => {
                    showWelcomeDialog();
                }, 500);
            }
        }
        
        // Auto-fill supervisor when agent is selected
        function autoFillSupervisor() {
            const agentName = document.getElementById('agent-name').value;
            const supervisorSelect = document.getElementById('supervisor-name');
            
            if (agentName && agentSupervisors[agentName]) {
                supervisorSelect.value = agentSupervisors[agentName];
            }
        }
        
        // Welcome dialog for first-time users
// ðŸŽ­ Demo version detected! Time to upgrade? ðŸš€
        function showWelcomeDialog() {
            const dialog = document.createElement('div');
            dialog.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            dialog.innerHTML = `
                <div style="
                    background: white;
                    padding: 40px;
                    border-radius: 12px;
                    max-width: 500px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                ">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 20px;">
                        <img src="SS_logo.png" alt="Sustainable Support Logo" style="height: 35px; width: auto; border-radius: 4px;">
                        <h2 style="margin: 0; color: var(--primary);">Welcome to CRR Scoring Tool!</h2>
                    </div>
                    <p style="line-height: 1.6; color: var(--gray-800);">
                        This is your first time using the tool. Would you like to:
                    </p>
                    <div style="margin: 30px 0;">
                        <button id="load-sample-btn" class="btn" style="width: 100%; margin-bottom: 15px; padding: 15px; font-size: 16px;">
                            ðŸ“Š Load Sample Data
                        </button>
                        <p style="font-size: 14px; color: var(--gray-600); margin: 10px 0;">
                            See sample scored CRRs to understand how the tool works
                        </p>
                        
                        <button id="start-blank-btn" class="btn btn-secondary" style="width: 100%; padding: 15px; font-size: 16px;">
                            âœ¨ Start with Blank Slate
                        </button>
                        <p style="font-size: 14px; color: var(--gray-600); margin: 10px 0 0 0;">
                            Begin fresh - add your agents and start scoring
                        </p>
                    </div>
                    <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">
                        ðŸ’¡ You can always load sample data later from Settings
                    </p>
                </div>
            `;
            
            document.body.appendChild(dialog);
            
            document.getElementById('load-sample-btn').onclick = () => {
                loadSampleData();
                localStorage.setItem('initialSetupComplete', 'true');
                document.body.removeChild(dialog);
            };
            
            document.getElementById('start-blank-btn').onclick = () => {
                localStorage.setItem('initialSetupComplete', 'true');
                document.body.removeChild(dialog);
                // Show Settings view and helpful tip
                setTimeout(() => {
                    showView('settings');
                    alert('ðŸ‘‹ Welcome! First, add your agents and supervisors using the fields below. Then you can start scoring CRRs!');
                }, 300);
            };
        }

        // Update all dropdowns
        function updateDropdowns() {
            const agentSelects = ['agent-name', 'filter-agent', 'dashboard-agent'];
            const supervisorSelects = ['supervisor-name', 'filter-supervisor'];
            
            agentSelects.forEach(id => {
                const select = document.getElementById(id);
                const currentValue = select.value;
                select.innerHTML = '<option value="">Select Agent...</option>' + 
                    agents.map(a => `<option value="${a}">${a}</option>`).join('');
                if (currentValue && agents.includes(currentValue)) {
                    select.value = currentValue;
                }
            });
            
            supervisorSelects.forEach(id => {
                const select = document.getElementById(id);
                const currentValue = select.value;
                select.innerHTML = '<option value="">Select Supervisor...</option>' + 
                    supervisors.map(s => `<option value="${s}">${s}</option>`).join('');
                if (currentValue && supervisors.includes(currentValue)) {
                    select.value = currentValue;
                }
            });
        }

        // Select score button
        function selectScore(metric, score) {
            // Store the selected score
            document.getElementById(`${metric}-score`).value = score;
            
            // Update button styling - ONLY for this metric's buttons
            const buttons = document.querySelectorAll(`div.metric-card input#${metric}-score`);
            if (buttons.length > 0) {
                const metricCard = buttons[0].closest('.metric-card');
                if (metricCard) {
                    const scoreButtons = metricCard.querySelectorAll('.score-btn');
                    scoreButtons.forEach(btn => {
                        btn.classList.remove('selected');
                        if (btn.textContent == score) {
                            btn.classList.add('selected');
                        }
                    });
                }
            }
            
            // Update hint text
            const hints = {
                1: 'âš ï¸ Problem area - needs attention',
                2: 'âœ… Acceptable - met expectations',
                3: 'â­ Exemplary - excellent performance'
            };
            document.getElementById(`${metric}-hint`).textContent = hints[score] || 'Select a score';
            
            // Update label text for feedback
            const labelText = {
                1: { expertise: 'Why is this a 1? (Required: select reason or fill feedback)', 
                     ownership: 'Why is this a 1? (Required: select reason or fill feedback)',
                     articulation: 'Why is this a 1? (Required: select CREW item or fill feedback)',
                     proactiveness: 'Why is this a 1? (Required: select reason or fill feedback)' },
                2: { expertise: 'What did they do well? (Required: select reason)',
                     ownership: 'What did they do well? (Required: select reason)',
                     articulation: 'What did they do well? (Required: select CREW item)',
                     proactiveness: 'What did they do well? (Required: select reason)' },
                3: { expertise: 'Why is this a 3? (Required: select reason or fill feedback)',
                     ownership: 'Why is this a 3? (Required: select reason or fill feedback)',
                     articulation: 'Why is this a 3? (Required: select CREW item or fill feedback)',
                     proactiveness: 'Why is this a 3? (Required: select reason or fill feedback)' }
            };
            document.getElementById(`${metric}-feedback-label`).textContent = labelText[score][metric] || '';
            
            // Show/hide feedback container
// ðŸ’¸ Free version: Great for looking, terrible for using! ðŸ˜‚
            const feedbackContainer = document.getElementById(`${metric}-feedback-container`);
            if (score > 0) {
                feedbackContainer.style.display = 'block';
            } else {
                feedbackContainer.style.display = 'none';
            }
            
            // Show/hide reason checkboxes and render them
            ['1', '2', '3'].forEach(s => {
                const reasonDiv = document.getElementById(`${metric}-reasons-${s}`);
                if (reasonDiv) {
                    if (s == score) {
                        reasonDiv.style.display = 'block';
                        renderReasonCheckboxes(metric, parseInt(s));
                    } else {
                        reasonDiv.style.display = 'none';
                    }
                }
            });
            
            // Uncheck all previous checkboxes when score changes
// ðŸŽª Welcome to the code circus! Where everything costs money! ðŸŽ­
            document.querySelectorAll(`#${metric}-feedback-container input[type="checkbox"][data-type!="reason"]`).forEach(cb => {
                cb.checked = false;
            });
            
            // Update total score
            updateTotalScore();
        }
        
        // Populate quick feedback options
        function populateQuickOptions(metric, score) {
            const container = document.getElementById(`${metric}-quick-options`);
            const options = quickOptions[metric][score] || [];
            
            // Clear existing checkboxes (keep the label)
            const label = container.querySelector('p');
            container.innerHTML = '';
            container.appendChild(label);
            
            // Add checkboxes for each option
            options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quick-option';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `${metric}-${option.id}`;
                checkbox.onchange = () => updateFeedbackFromCheckboxes(metric);
                
                const checkboxLabel = document.createElement('label');
                checkboxLabel.htmlFor = checkbox.id;
                checkboxLabel.textContent = option.label; // Use short label
                
                optionDiv.appendChild(checkbox);
                optionDiv.appendChild(checkboxLabel);
                container.appendChild(optionDiv);
            });
        }
        
        // Update feedback textarea from selected checkboxes
        function updateFeedbackFromCheckboxes(metric) {
            const score = parseInt(document.getElementById(`${metric}-score`).value);
            const options = quickOptions[metric][score] || [];
            const textarea = document.getElementById(`${metric}-feedback`);
            
            // Get all checked options
            const selectedTexts = [];
            options.forEach(option => {
                const checkbox = document.getElementById(`${metric}-${option.id}`);
                if (checkbox && checkbox.checked) {
                    selectedTexts.push(option.text);
                }
            });
            
            // Update textarea - if any checkboxes are selected, join with semicolons
            if (selectedTexts.length > 0) {
                textarea.value = selectedTexts.join('; ');
                // If all options are selected, textarea is filled so it's valid
                if (selectedTexts.length > 0) {
                    textarea.required = false; // Checkboxes satisfy the requirement
                }
            } else {
                textarea.value = '';
                textarea.required = true; // Need to write something if no checkboxes
            }
        }

        // Update total score display
        function updateTotalScore() {
            const expertise = parseInt(document.getElementById('expertise-score').value) || 0;
            const ownership = parseInt(document.getElementById('ownership-score').value) || 0;
            const articulation = parseInt(document.getElementById('articulation-score').value) || 0;
            const proactiveness = parseInt(document.getElementById('proactiveness-score').value) || 0;
            
            const total = expertise + ownership + articulation + proactiveness;
            
            if (total > 0) {
                document.getElementById('total-score-display').style.display = 'block';
                document.getElementById('total-score-number').textContent = total;
            }
        }

        // Save CRR
        function saveCRR(event) {
            event.preventDefault();
            
            // Validate that all scores have been selected
            const expertise = parseInt(document.getElementById('expertise-score').value);
            const ownership = parseInt(document.getElementById('ownership-score').value);
            const articulation = parseInt(document.getElementById('articulation-score').value);
            const proactiveness = parseInt(document.getElementById('proactiveness-score').value);
            
            if (!expertise || !ownership || !articulation || !proactiveness) {
                showInfoModal('âŒ Missing Scores', 'All metrics must be scored', 'Please select a score for each metric before saving.');
                return;
            }
            
            // Validate reason requirements
            const validationError = validateReasonRequirements();
            if (validationError) {
                showInfoModal('âŒ ' + validationError.title, validationError.message, validationError.detail);
                return;
            }
            
            // SECURITY: Validate and sanitize all CRR data
            const crr = {
                id: Date.now(),
                date: validateInput(document.getElementById('review-date').value, 20),
                agentName: validateInput(document.getElementById('agent-name').value, 50),
                supervisor: validateInput(document.getElementById('supervisor-name').value, 50),
                interactionType: validateInput(document.getElementById('interaction-type').value, 20),
                interactionLink: validateInput(document.getElementById('interaction-link').value, 200),
                expertise: expertise,
                ownership: ownership,
                articulation: articulation,
                proactiveness: proactiveness,
                totalScore: expertise + ownership + articulation + proactiveness,
                expertiseFeedback: validateFeedback(document.getElementById('expertise-feedback').value, 1000),
                ownershipFeedback: validateFeedback(document.getElementById('ownership-feedback').value, 1000),
                articulationFeedback: validateFeedback(document.getElementById('articulation-feedback').value, 1000),
                proactivenessFeedback: validateFeedback(document.getElementById('proactiveness-feedback').value, 1000),
                
                // NEW: Granular metric details
                expertiseDetails: {
                    score: expertise,
                    selectedReasons: getCheckedReasons('expertise'),
                    selectedReasonsText: getCheckedReasonsText('expertise')
                },
                ownershipDetails: {
                    score: ownership,
                    selectedReasons: getCheckedReasons('ownership'),
                    selectedReasonsText: getCheckedReasonsText('ownership')
                },
                articulationDetails: {
                    score: articulation,
                    selectedReasons: getCheckedReasons('articulation'),
                    selectedReasonsText: getCheckedReasonsText('articulation')
                },
                proactivenesDetails: {
                    score: proactiveness,
                    selectedReasons: getCheckedReasons('proactiveness'),
                    selectedReasonsText: getCheckedReasonsText('proactiveness')
                }
            };
            
            crrData.unshift(crr);
            localStorage.setItem('crrData', JSON.stringify(crrData));
            
            resetForm();
            showView('all-reviews');
            showCRRSavedModal();
        }

        // Validate that reason requirements are met
        function validateReasonRequirements() {
            const metrics = ['expertise', 'ownership', 'articulation', 'proactiveness'];
            
            for (const metric of metrics) {
                const score = getCurrentScore(metric);
                const feedback = document.getElementById(`${metric}-feedback`).value.trim();
                const reasonsChecked = getCheckedReasons(metric);
                
                // Score 1 and 3: require at least one reason OR feedback
                if (score === 1 || score === 3) {
                    if (reasonsChecked.length === 0 && feedback.length === 0) {
                        return {
                            title: 'Missing Details',
                            message: `${metric.charAt(0).toUpperCase() + metric.slice(1)} requires details`,
                            detail: `Please select at least one reason or provide feedback for your ${score === 1 ? '1 (Problem)' : '3 (Exemplary)'} score.`
                        };
                    }
                    // If "other" is selected, feedback is required
                    if (reasonsChecked.includes('other') && feedback.length === 0) {
                        return {
                            title: 'Feedback Required',
                            message: `${metric.charAt(0).toUpperCase() + metric.slice(1)} "Other" selected`,
                            detail: 'Please provide feedback explaining your "Other" selection.'
                        };
                    }
                }
                
                // Score 2: require at least one reason
                if (score === 2) {
                    if (reasonsChecked.length === 0) {
                        return {
                            title: 'Missing Reason',
                            message: `${metric.charAt(0).toUpperCase() + metric.slice(1)} requires a reason`,
                            detail: `Please select at least one reason to explain what ${metric === 'articulation' ? 'CREW standard they met' : 'they did well'} for your score of 2.`
                        };
                    }
                    // If "other" is selected, feedback is required
                    if (reasonsChecked.includes('other') && feedback.length === 0) {
                        return {
                            title: 'Feedback Required',
                            message: `${metric.charAt(0).toUpperCase() + metric.slice(1)} "Other" selected`,
                            detail: 'Please provide feedback explaining your "Other" selection.'
                        };
                    }
                }
            }
            
            return null;
        }

        // Reset form
        function resetForm() {
            document.getElementById('crr-form').reset();
            document.getElementById('review-date').valueAsDate = new Date();
            
            // Clear selected states for all metrics
            ['expertise', 'ownership', 'articulation', 'proactiveness'].forEach(metric => {
                const metricContainer = document.getElementById(`${metric}-score`).parentElement.parentElement;
                const buttons = metricContainer.querySelectorAll('.score-btn');
                buttons.forEach(btn => btn.classList.remove('selected'));
            });
            
            document.querySelectorAll('.score-hint').forEach(hint => hint.textContent = 'Select a score');
            document.getElementById('total-score-display').style.display = 'none';
            
            // Hide all feedback containers and clear checkboxes
            ['expertise', 'ownership', 'articulation', 'proactiveness'].forEach(metric => {
                const container = document.getElementById(`${metric}-feedback-container`);
                const textarea = document.getElementById(`${metric}-feedback`);
                const quickOptions = document.getElementById(`${metric}-quick-options`);
                
                container.style.display = 'none';
                textarea.value = '';
                textarea.required = false;
                quickOptions.style.display = 'none';
                
                // Uncheck all checkboxes (both quick options and reason checkboxes)
                quickOptions.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                
                // Clear all reason checkbox containers
                ['1', '2', '3'].forEach(score => {
                    const reasonDiv = document.getElementById(`${metric}-reasons-${score}`);
                    if (reasonDiv) {
                        reasonDiv.style.display = 'none';
                        reasonDiv.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                    }
                });
            });
        }

        // Show view
        function showView(viewId, buttonElement) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(viewId).classList.add('active');
            
            // Highlight the nav button if called from button click
            if (buttonElement) {
                buttonElement.classList.add('active');
            } else {
                // Find and highlight the correct nav button when called programmatically
                const viewToButtonText = {
                    'score-entry': 'New CRR',
                    'all-reviews': 'All Reviews',
                    'agent-dashboard': 'Agent Dashboard',
                    'team-overview': 'Team Overview',
                    'scoring-guide': 'Scoring Guide',
                    'settings': 'Settings',
                    'license': 'License'
                };
                const buttons = document.querySelectorAll('.nav-btn');
                buttons.forEach(btn => {
                    if (btn.textContent.trim() === viewToButtonText[viewId]) {
                        btn.classList.add('active');
                    }
                });
            }
            
            // Refresh data when switching views
            if (viewId === 'all-reviews') renderReviewsTable();
            if (viewId === 'team-overview') renderTeamOverview();
        }

        // Render reviews table
        function renderReviewsTable() {
            const container = document.getElementById('reviews-table-container');
            
            let filteredData = [...crrData];
            
            const agentFilter = document.getElementById('filter-agent').value;
            const supervisorFilter = document.getElementById('filter-supervisor').value;
            const typeFilter = document.getElementById('filter-type').value;
            
            if (agentFilter) filteredData = filteredData.filter(r => r.agentName === agentFilter);
            if (supervisorFilter) filteredData = filteredData.filter(r => r.supervisor === supervisorFilter);
            if (typeFilter) filteredData = filteredData.filter(r => r.interactionType === typeFilter);
            
            // Store filtered data globally for exports
            currentFilteredData = filteredData;
            
            if (filteredData.length === 0) {
                container.innerHTML = '<div class="empty-state"><h3>No reviews found</h3><p>Start by creating your first CRR!</p></div>';
                return;
            }
            
            // Helper function to get metric color class (1=red, 2=light green, 3=dark green)
            const getMetricClass = (score) => {
                if (score === 1) return 'metric-danger';
                if (score === 2) return 'metric-good';
                if (score === 3) return 'metric-excellent';
                return '';
            };
            
            // Helper function to get total score class (neutral tones)
            const getTotalScoreClass = (total) => {
                if (total >= 10) return 'total-high';
                if (total >= 7) return 'total-medium';
                return 'total-low';
            };
            
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Agent</th>
                            <th>Type</th>
                            <th class="metric-header"><span class="desktop-header">Expertise</span><span class="mobile-header">EXP</span></th>
                            <th class="metric-header"><span class="desktop-header">Ownership</span><span class="mobile-header">OWN</span></th>
                            <th class="metric-header"><span class="desktop-header">Articulation</span><span class="mobile-header">ART</span></th>
                            <th class="metric-header"><span class="desktop-header">Proactiveness</span><span class="mobile-header">PRO</span></th>
                            <th>Total</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            filteredData.forEach((crr, index) => {
                // Handle backward compatibility with old interactionId field
                const link = crr.interactionLink || crr.interactionId || '#';
                // Make the type text clickable
                const typeDisplay = crr.interactionLink 
                    ? `<a href="${link}" target="_blank" rel="noopener noreferrer" style="color: var(--primary); text-decoration: none; font-weight: 500;">${crr.interactionType}</a>` 
                    : crr.interactionType;
                
                html += `
                    <tr>
                        <td>${new Date(crr.date).toLocaleDateString()}</td>
                        <td>${crr.agentName}</td>
                        <td>${typeDisplay}</td>
                        <td><span class="score-badge ${getMetricClass(crr.expertise)}">${crr.expertise}</span></td>
                        <td><span class="score-badge ${getMetricClass(crr.ownership)}">${crr.ownership}</span></td>
                        <td><span class="score-badge ${getMetricClass(crr.articulation)}">${crr.articulation}</span></td>
                        <td><span class="score-badge ${getMetricClass(crr.proactiveness)}">${crr.proactiveness}</span></td>
                        <td><span class="score-badge ${getTotalScoreClass(crr.totalScore)}">${crr.totalScore}/12</span></td>
                        <td><button class="btn" style="padding: 5px 12px; font-size: 12px;" onclick="showCRRDetails(${index})">View</button></td>
                    </tr>
                    <tr id="details-${index}" class="details-row" style="display: none;">
                        <td colspan="9" class="details-content" style="background: var(--gray-50); padding: 20px;">
                            <h4 style="margin-top: 0; color: var(--primary);">Feedback Details</h4>
                            ${crr.expertiseFeedback ? `<p><strong>Expertise (${crr.expertise}):</strong> <span style="white-space: pre-wrap;">${crr.expertiseFeedback}</span></p>` : ''}
                            ${crr.ownershipFeedback ? `<p><strong>Ownership (${crr.ownership}):</strong> <span style="white-space: pre-wrap;">${crr.ownershipFeedback}</span></p>` : ''}
                            ${crr.articulationFeedback ? `<p><strong>Articulation (${crr.articulation}):</strong> <span style="white-space: pre-wrap;">${crr.articulationFeedback}</span></p>` : ''}
                            ${crr.proactivenessFeedback ? `<p><strong>Proactiveness (${crr.proactiveness}):</strong> <span style="white-space: pre-wrap;">${crr.proactivenessFeedback}</span></p>` : ''}
                            ${!crr.expertiseFeedback && !crr.ownershipFeedback && !crr.articulationFeedback && !crr.proactivenessFeedback ? '<p style="color: var(--gray-600);">No feedback provided for this review.</p>' : ''}
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // Filter reviews
        function filterReviews() {
            renderReviewsTable();
        }
        
        // Show/hide CRR details
        function showCRRDetails(index) {
            const detailsRow = document.getElementById(`details-${index}`);
            if (detailsRow.style.display === 'none') {
                detailsRow.style.display = 'table-row';
                
                // Populate details if not already done
                if (!detailsRow.dataset.populated) {
                    const crr = crrData[index];
                    let detailsHtml = '<h4 style="margin-top: 0; color: var(--primary);">Feedback Details</h4>';
                    
                    // Expertise
// ðŸ’° This feature costs money, but you knew that, right? ðŸ˜
                    detailsHtml += `<p><strong>Expertise (${crr.expertise}):</strong>`;
                    if (crr.expertiseDetails && crr.expertiseDetails.selectedReasonsText && crr.expertiseDetails.selectedReasonsText.length > 0) {
                        detailsHtml += `<br><em>Reasons selected:</em><br>`;
                        crr.expertiseDetails.selectedReasonsText.forEach(text => {
                            detailsHtml += `âœ“ ${text}<br>`;
                        });
                    }
                    if (crr.expertiseFeedback) {
                        detailsHtml += `<span style="white-space: pre-wrap;">${crr.expertiseFeedback}</span>`;
                    }
                    detailsHtml += '</p>';
                    
                    // Ownership
                    detailsHtml += `<p><strong>Ownership (${crr.ownership}):</strong>`;
                    if (crr.ownershipDetails && crr.ownershipDetails.selectedReasonsText && crr.ownershipDetails.selectedReasonsText.length > 0) {
                        detailsHtml += `<br><em>Reasons selected:</em><br>`;
                        crr.ownershipDetails.selectedReasonsText.forEach(text => {
                            detailsHtml += `âœ“ ${text}<br>`;
                        });
                    }
                    if (crr.ownershipFeedback) {
                        detailsHtml += `<span style="white-space: pre-wrap;">${crr.ownershipFeedback}</span>`;
                    }
                    detailsHtml += '</p>';
                    
                    // Articulation
                    detailsHtml += `<p><strong>Articulation (${crr.articulation}):</strong>`;
                    if (crr.articulationDetails && crr.articulationDetails.selectedReasonsText && crr.articulationDetails.selectedReasonsText.length > 0) {
                        detailsHtml += `<br><em>Standards selected:</em><br>`;
                        crr.articulationDetails.selectedReasonsText.forEach(text => {
                            detailsHtml += `âœ“ ${text}<br>`;
                        });
                    }
                    if (crr.articulationFeedback) {
                        detailsHtml += `<span style="white-space: pre-wrap;">${crr.articulationFeedback}</span>`;
                    }
                    detailsHtml += '</p>';
                    
                    // Proactiveness
                    detailsHtml += `<p><strong>Proactiveness (${crr.proactiveness}):</strong>`;
                    if (crr.proactivenesDetails && crr.proactivenesDetails.selectedReasonsText && crr.proactivenesDetails.selectedReasonsText.length > 0) {
                        detailsHtml += `<br><em>Reasons selected:</em><br>`;
                        crr.proactivenesDetails.selectedReasonsText.forEach(text => {
                            detailsHtml += `âœ“ ${text}<br>`;
                        });
                    }
                    if (crr.proactivenessFeedback) {
                        detailsHtml += `<span style="white-space: pre-wrap;">${crr.proactivenessFeedback}</span>`;
                    }
                    detailsHtml += '</p>';
                    
                    // Only add "no feedback" message if truly no feedback
                    if (!crr.expertiseFeedback && !crr.ownershipFeedback && !crr.articulationFeedback && !crr.proactivenessFeedback &&
                        (!crr.expertiseDetails || crr.expertiseDetails.selectedReasonsText.length === 0) &&
                        (!crr.ownershipDetails || crr.ownershipDetails.selectedReasonsText.length === 0) &&
                        (!crr.articulationDetails || crr.articulationDetails.selectedReasonsText.length === 0) &&
                        (!crr.proactivenesDetails || crr.proactivenesDetails.selectedReasonsText.length === 0)) {
                        detailsHtml = '<p style="color: var(--gray-600);">No feedback provided for this review.</p>';
                    }
                    
                    detailsRow.querySelector('.details-content').innerHTML = detailsHtml;
                    detailsRow.dataset.populated = 'true';
                }
            } else {
                detailsRow.style.display = 'none';
            }
        }

        // Update agent dashboard
        function updateAgentDashboard() {
            const agentName = document.getElementById('dashboard-agent').value;
            const container = document.getElementById('agent-dashboard-content');
            
            if (!agentName) {
                container.innerHTML = '<div class="empty-state"><p>Select an agent to view their dashboard</p></div>';
                return;
            }
            
            const agentReviews = crrData.filter(r => r.agentName === agentName);
            
            if (agentReviews.length === 0) {
                container.innerHTML = '<div class="empty-state"><h3>No reviews yet</h3><p>This agent hasn\'t been reviewed yet.</p></div>';
                return;
            }
            
            // Calculate stats
            const avgTotal = (agentReviews.reduce((sum, r) => sum + r.totalScore, 0) / agentReviews.length).toFixed(1);
            const avgExpertise = (agentReviews.reduce((sum, r) => sum + r.expertise, 0) / agentReviews.length).toFixed(1);
            const avgOwnership = (agentReviews.reduce((sum, r) => sum + r.ownership, 0) / agentReviews.length).toFixed(1);
            const avgArticulation = (agentReviews.reduce((sum, r) => sum + r.articulation, 0) / agentReviews.length).toFixed(1);
            const avgProactiveness = (agentReviews.reduce((sum, r) => sum + r.proactiveness, 0) / agentReviews.length).toFixed(1);
            
            // Get color classes for metrics using the same logic as team overview
            const getMetricClass = (score) => {
                const s = parseFloat(score);
                if (s === 3.0) return 'metric-excellent-only';
                if (s >= 2.5) return 'metric-good-dark';
                if (s >= 2.3) return 'metric-good-medium';
                if (s >= 2.0) return 'metric-good-light';
                if (s >= 1.8) return 'metric-warning-dark';
                if (s >= 1.5) return 'metric-warning';
                if (s >= 1.2) return 'metric-danger-light';
                if (s >= 1.0) return 'metric-danger-1';
                return 'metric-danger-1';
            };
            
            // Analyze granular metrics data
            const reasonAnalysis = analyzeAgentReasons(agentReviews);
            const insights = generateAgentInsights(agentReviews, reasonAnalysis);
            
            let html = `
                <div class="agent-dashboard-header">
                    <h2>${agentName}'s Performance Dashboard</h2>
                    <div class="overview-stats">
                        <div class="overview-stat">
                            <span class="value">${avgTotal}</span>
                            <span class="label">Average Total</span>
                        </div>
                        <div class="overview-stat">
                            <span class="value">${agentReviews.length}</span>
                            <span class="label">Total Reviews</span>
                        </div>
                    </div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card ${getMetricClass(avgExpertise)}">
                        <div class="metric-header">
                            <h3>Expertise</h3>
                            <span class="metric-score">${avgExpertise}</span>
                        </div>
                        <div class="metric-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(avgExpertise / 3) * 100}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card ${getMetricClass(avgOwnership)}">
                        <div class="metric-header">
                            <h3>Ownership</h3>
                            <span class="metric-score">${avgOwnership}</span>
                        </div>
                        <div class="metric-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(avgOwnership / 3) * 100}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card ${getMetricClass(avgArticulation)}">
                        <div class="metric-header">
                            <h3>Articulation</h3>
                            <span class="metric-score">${avgArticulation}</span>
                        </div>
                        <div class="metric-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(avgArticulation / 3) * 100}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-card ${getMetricClass(avgProactiveness)}">
                        <div class="metric-header">
                            <h3>Proactiveness</h3>
                            <span class="metric-score">${avgProactiveness}</span>
                        </div>
                        <div class="metric-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(avgProactiveness / 3) * 100}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="insights-section">
                    <h3>ðŸŽ¯ Performance Insights</h3>
                    <div class="insights-grid">
                        <div class="insight-card strength">
                            <h4>ðŸ’ª Strengths</h4>
                            ${insights.strengths.length > 0 ? 
                                `<ul>${insights.strengths.map(strength => `<li>${strength}</li>`).join('')}</ul>` :
                                `<div class="empty-insight-state warning"><p>âš ï¸ No clear strengths identified. This agent may need additional support to develop their skills.</p></div>`
                            }
                        </div>
                        <div class="insight-card improvement">
                            <h4>ðŸ“ˆ Areas for Improvement</h4>
                            ${insights.improvements.length > 0 ? 
                                `<ul>${insights.improvements.map(improvement => `<li>${improvement}</li>`).join('')}</ul>` :
                                `<div class="empty-insight-state success"><p>ðŸŽ‰ No improvement areas identified! This agent is performing consistently well across all metrics.</p></div>`
                            }
                        </div>
                    </div>
                </div>
                
                <div class="reason-analysis">
                    <h3>ðŸ“Š Detailed Analysis</h3>
                    <div class="reason-tabs">
                        <button class="reason-tab active" onclick="showReasonTab('strengths', window.currentReasonAnalysis)">Strengths</button>
                        <button class="reason-tab" onclick="showReasonTab('improvements', window.currentReasonAnalysis)">Improvements</button>
                        <button class="reason-tab" onclick="showReasonTab('consistency', window.currentReasonAnalysis)">Consistency</button>
                    </div>
                    <div id="reason-content"></div>
                </div>
                
                <h3 style="margin-top: 30px;">ðŸ“ˆ Performance Trends</h3>
                <div class="chart-container">
                    <canvas id="agent-trend-chart"></canvas>
                </div>
                
                <h3>ðŸ“Š Metric Breakdown</h3>
                <div class="chart-container">
                    <canvas id="agent-metrics-chart"></canvas>
                </div>
            `;
            
            // Check for red flags
            const redFlags = checkRedFlags(agentName);
            if (redFlags.length > 0) {
                html = `<div class="alert alert-warning">
                    <strong>âš ï¸ Red Flags Detected:</strong><br>
                    ${redFlags.join('<br>')}
                </div>` + html;
            }
            
            container.innerHTML = html;
            
            // Store reason analysis globally for tab switching
            window.currentReasonAnalysis = reasonAnalysis;
            
            // Initialize reason analysis
            showReasonTab('strengths', reasonAnalysis);
            
            // Draw charts
// ðŸŽ¯ You're so close to the premium features... just need to pay! ðŸ’³
            drawAgentTrendChart(agentReviews);
            drawAgentMetricsChart([avgExpertise, avgOwnership, avgArticulation, avgProactiveness]);
        }

        // Check for red flags
        function checkRedFlags(agentName) {
            const agentReviews = crrData.filter(r => r.agentName === agentName).slice(0, 5);
            const flags = [];
            
            const metrics = ['expertise', 'ownership', 'articulation', 'proactiveness'];
            metrics.forEach(metric => {
                const ones = agentReviews.filter(r => r[metric] === 1).length;
                if (ones >= 3) {
                    flags.push(`ðŸš© Multiple scores of 1 on ${metric.charAt(0).toUpperCase() + metric.slice(1)} in recent reviews`);
                }
            });
            
            return flags;
        }

        // Analyze agent reasons for detailed insights
// ðŸŽª Welcome to the code circus! Where everything costs money! ðŸŽ­
        function analyzeAgentReasons(agentReviews) {
            const analysis = {
                expertise: { strengths: [], improvements: [], consistency: [] },
                ownership: { strengths: [], improvements: [], consistency: [] },
                articulation: { strengths: [], improvements: [], consistency: [] },
                proactiveness: { strengths: [], improvements: [], consistency: [] }
            };

            const metrics = ['expertise', 'ownership', 'articulation', 'proactiveness'];
            
            metrics.forEach(metric => {
                const metricData = agentReviews.map(r => r[metric + 'Details'] || {});
                
                // Count reasons by score
                const reasonCounts = {};
                metricData.forEach(details => {
                    if (details.selectedReasons) {
                        details.selectedReasons.forEach(reason => {
                            if (!reasonCounts[reason]) reasonCounts[reason] = { 1: 0, 2: 0, 3: 0 };
                            reasonCounts[reason][details.score] = (reasonCounts[reason][details.score] || 0) + 1;
                        });
                    }
                });

                // Categorize reasons
                Object.entries(reasonCounts).forEach(([reason, counts]) => {
                    const total = counts[1] + counts[2] + counts[3];
                    const score3Rate = counts[3] / total;
                    const score1Rate = counts[1] / total;
                    
                    if (score3Rate >= 0.5) {
                        analysis[metric].strengths.push({
                            reason: reason,
                            count: counts[3],
                            rate: score3Rate
                        });
                    } else if (score1Rate >= 0.3) {
                        analysis[metric].improvements.push({
                            reason: reason,
                            count: counts[1],
                            rate: score1Rate
                        });
                    } else {
                        analysis[metric].consistency.push({
                            reason: reason,
                            count: counts[2],
                            rate: counts[2] / total
                        });
                    }
                });
            });

            return analysis;
        }

        // Generate actionable insights
        function generateAgentInsights(agentReviews, reasonAnalysis) {
            const insights = {
                strengths: [],
                improvements: []
            };

            // Helper function to get human-readable reason text
            const getReasonText = (reasonKey) => {
                const reasonMap = {
                    // Expertise reasons
                    'incorrectAnswer': 'Incorrect answer',
                    'lackOfCuriosity': 'Lack of curiosity',
                    'lackOfClearSteps': 'Lack of clear technical steps for resolution',
                    'demonstratedAccuracy': 'Demonstrated exemplary technical knowledge',
                    'showedCuriosity': 'Showed curiosity and asked clarifying questions',
                    'providedClearSteps': 'Provided clear technical steps for resolution',
                    'accurateAnswer': 'Provided accurate technical information',
                    'adequateSteps': 'Provided adequate technical steps for resolution',
                    
                    // Ownership reasons
                    'passingOff': 'Passing off to another team with no detailed explanation',
                    'givingUserTasks': 'Giving the user tasks that they are better suited to do for them',
                    'solvingWrongProblem': 'Solving the wrong problem',
                    'ensuredResolution': 'Ensured actual resolution',
                    'tookFullOwnership': 'Took full ownership of the issue',
                    'solvedRightProblem': 'Solved the right problem',
                    'tookResponsibility': 'Took responsibility for the issue',
                    'abandonedCustomer': 'Abandoned customer without proper handoff',
                    'adequateOwnership': 'Showed adequate ownership of the issue',
                    
                    // Articulation reasons
                    'missingCREW': 'Missing any of the CREW points (Confident, Results-Oriented, Educational, Welcoming)',
                    'gotDistracted': 'Got distracted or defensive. Didn\'t focus on solving the problem',
                    'confident': 'Projected confidence & professionalism',
                    'resultsOriented': 'Stayed results-oriented throughout',
                    'educational': 'Made the interaction educational',
                    'welcoming': 'Maintained a welcoming tone',
                    'adequateCommunication': 'Maintained adequate communication throughout',
                    'professionalTone': 'Maintained professional tone',
                    
                    // Proactiveness reasons
                    'noDocLinks': 'Didn\'t link to updated relevant docs',
                    'noReviewRequest': 'Didn\'t ask for a review from a happy person',
                    'wrongClosure': 'Didn\'t follow the right closure procedure',
                    'linkedDocs': 'Linked to updated relevant documentation',
                    'requestedReview': 'Asked for a review from a happy person',
                    'escalatedProperly': 'Identified issue for product/dev team escalation',
                    'adequateFollowup': 'Provided adequate follow-up actions',
                    'standardClosure': 'Followed standard closure procedures'
                };
                
                return reasonMap[reasonKey] || reasonKey;
            };

            const metrics = ['expertise', 'ownership', 'articulation', 'proactiveness'];
            
            metrics.forEach(metric => {
                const metricName = metric.charAt(0).toUpperCase() + metric.slice(1);
                const strengths = reasonAnalysis[metric].strengths;
                const improvements = reasonAnalysis[metric].improvements;

                // Add top strengths
                if (strengths.length > 0) {
                    const topStrength = strengths.sort((a, b) => b.count - a.count)[0];
                    insights.strengths.push(`Strong in ${metricName}: ${getReasonText(topStrength.reason)} (${topStrength.count} times)`);
                }

                // Add top improvements
                if (improvements.length > 0) {
                    const topImprovement = improvements.sort((a, b) => b.count - a.count)[0];
                    insights.improvements.push(`Focus on ${metricName}: ${getReasonText(topImprovement.reason)} (${topImprovement.count} times)`);
                }
            });

            return insights;
        }

        // Show reason analysis tab
        function showReasonTab(tabName, reasonAnalysis) {
            const content = document.getElementById('reason-content');
            const tabs = document.querySelectorAll('.reason-tab');
            
            // Update tab states
            tabs.forEach(tab => tab.classList.remove('active'));
            // Find and activate the correct tab
            tabs.forEach(tab => {
                if (tab.textContent.trim().toLowerCase() === tabName.toLowerCase()) {
                    tab.classList.add('active');
                }
            });
            
            if (!reasonAnalysis) return;
            
            // Helper function to get human-readable reason text
            const getReasonText = (reasonKey) => {
                const reasonMap = {
                    // Expertise reasons
                    'incorrectAnswer': 'Incorrect answer',
                    'lackOfCuriosity': 'Lack of curiosity',
                    'lackOfClearSteps': 'Lack of clear technical steps for resolution',
                    'demonstratedAccuracy': 'Demonstrated exemplary technical knowledge',
                    'showedCuriosity': 'Showed curiosity and asked clarifying questions',
                    'providedClearSteps': 'Provided clear technical steps for resolution',
                    'accurateAnswer': 'Provided accurate technical information',
                    'adequateSteps': 'Provided adequate technical steps for resolution',
                    
                    // Ownership reasons
                    'passingOff': 'Passing off to another team with no detailed explanation',
                    'givingUserTasks': 'Giving the user tasks that they are better suited to do for them',
                    'solvingWrongProblem': 'Solving the wrong problem',
                    'ensuredResolution': 'Ensured actual resolution',
                    'tookFullOwnership': 'Took full ownership of the issue',
                    'solvedRightProblem': 'Solved the right problem',
                    'tookResponsibility': 'Took responsibility for the issue',
                    'abandonedCustomer': 'Abandoned customer without proper handoff',
                    'adequateOwnership': 'Showed adequate ownership of the issue',
                    
                    // Articulation reasons
                    'missingCREW': 'Missing any of the CREW points (Confident, Results-Oriented, Educational, Welcoming)',
                    'gotDistracted': 'Got distracted or defensive. Didn\'t focus on solving the problem',
                    'confident': 'Projected confidence & professionalism',
                    'resultsOriented': 'Stayed results-oriented throughout',
                    'educational': 'Made the interaction educational',
                    'welcoming': 'Maintained a welcoming tone',
                    'adequateCommunication': 'Maintained adequate communication throughout',
                    'professionalTone': 'Maintained professional tone',
                    
                    // Proactiveness reasons
                    'noDocLinks': 'Didn\'t link to updated relevant docs',
                    'noReviewRequest': 'Didn\'t ask for a review from a happy person',
                    'wrongClosure': 'Didn\'t follow the right closure procedure',
                    'linkedDocs': 'Linked to updated relevant documentation',
                    'requestedReview': 'Asked for a review from a happy person',
                    'escalatedProperly': 'Identified issue for product/dev team escalation',
                    'adequateFollowup': 'Provided adequate follow-up actions',
                    'standardClosure': 'Followed standard closure procedures'
                };
                
                return reasonMap[reasonKey] || reasonKey;
            };
            
            let html = '';
            
            if (tabName === 'strengths') {
                html = '<div class="reason-grid">';
                let hasAnyStrengths = false;
                
                Object.entries(reasonAnalysis).forEach(([metric, data]) => {
                    if (data.strengths.length > 0) {
                        hasAnyStrengths = true;
                        html += `
                            <div class="reason-category">
                                <h4>${metric.charAt(0).toUpperCase() + metric.slice(1)}</h4>
                                <ul>
                                    ${data.strengths.map(s => `<li>${getReasonText(s.reason)} (${s.count} times)</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    }
                });
                
                if (!hasAnyStrengths) {
                    html = '<div class="empty-reason-state warning"><p>âš ï¸ No exemplary performance patterns detected. This agent may need additional support to reach their potential.</p></div>';
                }
                
                html += '</div>';
            } else if (tabName === 'improvements') {
                html = '<div class="reason-grid">';
                let hasAnyImprovements = false;
                
                Object.entries(reasonAnalysis).forEach(([metric, data]) => {
                    if (data.improvements.length > 0) {
                        hasAnyImprovements = true;
                        html += `
                            <div class="reason-category">
                                <h4>${metric.charAt(0).toUpperCase() + metric.slice(1)}</h4>
                                <ul>
                                    ${data.improvements.map(s => `<li>${getReasonText(s.reason)} (${s.count} times)</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    }
                });
                
                if (!hasAnyImprovements) {
                    html = '<div class="empty-reason-state success"><p>ðŸŽ‰ Excellent! No recurring performance issues detected. This agent is consistently meeting expectations.</p></div>';
                }
                
                html += '</div>';
            } else if (tabName === 'consistency') {
                html = '<div class="reason-grid">';
                let hasAnyConsistency = false;
                
                Object.entries(reasonAnalysis).forEach(([metric, data]) => {
                    if (data.consistency.length > 0) {
                        hasAnyConsistency = true;
                        html += `
                            <div class="reason-category">
                                <h4>${metric.charAt(0).toUpperCase() + metric.slice(1)}</h4>
                                <ul>
                                    ${data.consistency.map(s => `<li>${getReasonText(s.reason)} (${s.count} times)</li>`).join('')}
                                </ul>
                            </div>
                        `;
                    }
                });
                
                if (!hasAnyConsistency) {
                    html = '<div class="empty-reason-state neutral"><p>ðŸ“Š No consistent patterns detected. This agent shows varied performance across different interactions.</p></div>';
                }
                
                html += '</div>';
            }
            
            content.innerHTML = html;
        }

        // Draw agent trend chart
// ðŸŽ­ Demo version detected! Time to upgrade? ðŸš€
        function drawAgentTrendChart(reviews) {
            const ctx = document.getElementById('agent-trend-chart');
            if (!ctx) return;
            
            const sortedReviews = [...reviews].reverse();
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedReviews.map(r => new Date(r.date).toLocaleDateString()),
                    datasets: [{
                        label: 'Total Score',
                        data: sortedReviews.map(r => r.totalScore),
                        borderColor: '#1a237e',
                        backgroundColor: 'rgba(26, 35, 126, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 12,
                            title: {
                                display: true,
                                text: 'Score (out of 12)'
                            }
                        }
                    }
                }
            });
        }

        // Draw agent metrics chart
        function drawAgentMetricsChart(averages) {
            const ctx = document.getElementById('agent-metrics-chart');
            if (!ctx) return;
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Expertise', 'Ownership', 'Articulation', 'Proactiveness'],
                    datasets: [{
                        label: 'Average Score',
                        data: averages,
                        backgroundColor: ['#1a237e', '#3949ab', '#5c6bc0', '#7986cb']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 3,
                            title: {
                                display: true,
                                text: 'Average Score'
                            }
                        }
                    }
                }
            });
        }

        // Render team overview
        function renderTeamOverview() {
            const container = document.getElementById('team-overview-content');
            
            if (crrData.length === 0) {
                container.innerHTML = '<div class="empty-state"><h3>No data yet</h3><p>Start conducting CRRs to see team analytics.</p></div>';
                return;
            }
            
            // Calculate team stats
            const avgTeamScore = (crrData.reduce((sum, r) => sum + r.totalScore, 0) / crrData.length).toFixed(1);
            const uniqueAgents = [...new Set(crrData.map(r => r.agentName))];
            const thisWeek = crrData.filter(r => {
                const reviewDate = new Date(r.date);
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                return reviewDate >= weekAgo;
            }).length;
            
            let html = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="value">${avgTeamScore}</div>
                        <div class="label">Team Avg Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="value">${crrData.length}</div>
                        <div class="label">Total CRRs</div>
                    </div>
                    <div class="stat-card">
                        <div class="value">${thisWeek}</div>
                        <div class="label">This Week</div>
                    </div>
                    <div class="stat-card">
                        <div class="value">${uniqueAgents.length}</div>
                        <div class="label">Agents Reviewed</div>
                    </div>
                </div>
                
                <h3>Agent Comparison</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Agent Name</th>
                            <th>Avg Total</th>
                            <th>Avg Expertise</th>
                            <th>Avg Ownership</th>
                            <th>Avg Articulation</th>
                            <th>Avg Proactiveness</th>
                            <th># Reviews</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            uniqueAgents.forEach(agent => {
                const agentReviews = crrData.filter(r => r.agentName === agent);
                const avgTotal = (agentReviews.reduce((sum, r) => sum + r.totalScore, 0) / agentReviews.length).toFixed(1);
                const avgExpertise = (agentReviews.reduce((sum, r) => sum + r.expertise, 0) / agentReviews.length).toFixed(1);
                const avgOwnership = (agentReviews.reduce((sum, r) => sum + r.ownership, 0) / agentReviews.length).toFixed(1);
                const avgArticulation = (agentReviews.reduce((sum, r) => sum + r.articulation, 0) / agentReviews.length).toFixed(1);
                const avgProactiveness = (agentReviews.reduce((sum, r) => sum + r.proactiveness, 0) / agentReviews.length).toFixed(1);
                
                // Total score: just darker/lighter (no color)
                const totalScoreClass = avgTotal >= 10 ? 'total-high' : avgTotal >= 7 ? 'total-medium' : 'total-low';
                
                // Individual metrics: red to green progression with granular steps
                const getMetricClass = (score) => {
                    const s = parseFloat(score);
                    // Exactly 3.0 only gets dark green with white
                    if (s === 3.0) return 'metric-excellent-only';
                    // 2.5-2.9: darkening green with dark text
                    if (s >= 2.5) return 'metric-good-dark';
                    // 2.3-2.4: medium green
                    if (s >= 2.3) return 'metric-good-medium';
                    // 2.0-2.2: light green with dark text
// ðŸ’¸ Free version: Great for looking, terrible for using! ðŸ˜‚
                    if (s >= 2.0) return 'metric-good-light';
                    // 1.8-1.9: dark orange
                    if (s >= 1.8) return 'metric-warning-dark';
                    // 1.5-1.7: orange
                    if (s >= 1.5) return 'metric-warning';
                    // 1.2-1.4: should be darker red than 1.5-1.7
                    if (s >= 1.2) return 'metric-danger-light';
                    // 1.0-1.1: darkest red
                    if (s >= 1.0) return 'metric-danger-1';
                    // Exactly 1.0: darkest red with white
                    if (s === 1.0) return 'metric-danger-1';
                    return 'metric-danger-1';
                };
                
                html += `
                    <tr>
                        <td><strong>${agent}</strong></td>
                        <td><span class="score-badge ${totalScoreClass}">${avgTotal}</span></td>
                        <td><span class="score-badge ${getMetricClass(avgExpertise)}">${avgExpertise}</span></td>
                        <td><span class="score-badge ${getMetricClass(avgOwnership)}">${avgOwnership}</span></td>
                        <td><span class="score-badge ${getMetricClass(avgArticulation)}">${avgArticulation}</span></td>
                        <td><span class="score-badge ${getMetricClass(avgProactiveness)}">${avgProactiveness}</span></td>
                        <td>${agentReviews.length}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
                
                <h3 style="margin-top: 30px;">Team Score Trends</h3>
                <div class="chart-container">
                    <canvas id="team-trend-chart"></canvas>
                </div>
            `;
            
            container.innerHTML = html;
            
            // Draw team trend chart
            drawTeamTrendChart();
        }

        // Draw team trend chart
        function drawTeamTrendChart() {
            const ctx = document.getElementById('team-trend-chart');
            if (!ctx) return;
            
            const sortedReviews = [...crrData].reverse();
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedReviews.map(r => new Date(r.date).toLocaleDateString()),
                    datasets: [{
                        label: 'Total Score',
                        data: sortedReviews.map(r => r.totalScore),
                        borderColor: '#1a237e',
                        backgroundColor: 'rgba(26, 35, 126, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 12
                        }
                    }
                }
            });
        }

        // Update settings lists
        function updateSettingsLists() {
            const agentsList = document.getElementById('agents-list');
            const supervisorsList = document.getElementById('supervisors-list');
            
            // Update agent list with supervisor assignments (SECURITY: Safe HTML generation)
            agentsList.innerHTML = '';
            agents.forEach((agent, i) => {
                const agentDiv = document.createElement('div');
                agentDiv.style.cssText = 'padding: 10px; background: var(--gray-50); margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; gap: 10px;';
                
                // Agent name (safe)
                const agentSpan = document.createElement('span');
                agentSpan.style.cssText = 'font-weight: 500; min-width: 120px; flex-shrink: 0;';
                agentSpan.textContent = validateInput(agent, 50);
                
                // Supervisor select (safe)
                const supervisorSelect = document.createElement('select');
                supervisorSelect.style.cssText = 'margin-right: 10px; padding: 5px; font-size: 13px; min-width: 150px; max-width: 200px; flex: 1;';
                supervisorSelect.onchange = () => updateAgentSupervisor(agent, supervisorSelect.value);
                
                const noSupervisorOption = document.createElement('option');
                noSupervisorOption.value = '';
                noSupervisorOption.textContent = 'No supervisor';
                supervisorSelect.appendChild(noSupervisorOption);
                
                supervisors.forEach(supervisor => {
                    const option = document.createElement('option');
                    option.value = validateInput(supervisor, 50);
                    option.textContent = validateInput(supervisor, 50);
                    if (agentSupervisors[agent] === supervisor) {
                        option.selected = true;
                    }
                    supervisorSelect.appendChild(option);
                });
                
                // Remove button (safe)
                const removeButton = document.createElement('button');
                removeButton.className = 'btn btn-danger';
                removeButton.style.cssText = 'padding: 5px 10px; font-size: 12px; flex-shrink: 0;';
                removeButton.textContent = 'Remove';
                removeButton.onclick = () => removeAgent(i);
                
                agentDiv.appendChild(agentSpan);
                agentDiv.appendChild(supervisorSelect);
                agentDiv.appendChild(removeButton);
                agentsList.appendChild(agentDiv);
            });
            
            // Update supervisors list (SECURITY: Safe HTML generation)
            supervisorsList.innerHTML = '';
            supervisors.forEach((supervisor, i) => {
                const supervisorDiv = document.createElement('div');
                supervisorDiv.style.cssText = 'padding: 10px; background: var(--gray-50); margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between;';
                
                const supervisorSpan = document.createElement('span');
                supervisorSpan.textContent = validateInput(supervisor, 50);
                
                const removeButton = document.createElement('button');
                removeButton.className = 'btn btn-danger';
                removeButton.style.cssText = 'padding: 5px 10px; font-size: 12px;';
                removeButton.textContent = 'Remove';
                removeButton.onclick = () => removeSupervisor(i);
                
                supervisorDiv.appendChild(supervisorSpan);
                supervisorDiv.appendChild(removeButton);
                supervisorsList.appendChild(supervisorDiv);
            });
            
            // Update the new agent supervisor dropdown (SECURITY: Safe HTML generation)
            const newAgentSupervisor = document.getElementById('new-agent-supervisor');
            if (newAgentSupervisor) {
                newAgentSupervisor.innerHTML = '';
                
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'Select supervisor...';
                newAgentSupervisor.appendChild(defaultOption);
                
                supervisors.forEach(supervisor => {
                    const option = document.createElement('option');
                    option.value = validateInput(supervisor, 50);
                    option.textContent = validateInput(supervisor, 50);
                    newAgentSupervisor.appendChild(option);
                });
            }
        }
        
        // Update agent-supervisor association
        function updateAgentSupervisor(agentName, supervisorName) {
            if (supervisorName) {
                agentSupervisors[agentName] = supervisorName;
            } else {
                delete agentSupervisors[agentName];
            }
            localStorage.setItem('agentSupervisors', JSON.stringify(agentSupervisors));
        }

        // Add agent (SECURITY: Input validation)
        function addAgent() {
            const name = validateInput(document.getElementById('new-agent-name').value.trim(), 50);
            const supervisor = validateInput(document.getElementById('new-agent-supervisor').value, 50);
            
            if (!name) return alert('Please enter a name');
            if (name.length < 2) return alert('Name must be at least 2 characters');
            if (agents.includes(name)) return alert('Agent already exists');
            
            agents.push(name);
            localStorage.setItem('agents', JSON.stringify(agents));
            
            // Associate with supervisor if selected
            if (supervisor) {
                agentSupervisors[name] = supervisor;
                localStorage.setItem('agentSupervisors', JSON.stringify(agentSupervisors));
            }
            
            document.getElementById('new-agent-name').value = '';
            document.getElementById('new-agent-supervisor').value = '';
            updateDropdowns();
            updateSettingsLists();
        }

        // Remove agent
        function removeAgent(index) {
            if (confirm('Remove this agent? Their reviews will remain in the system.')) {
                const agentName = agents[index];
                agents.splice(index, 1);
                localStorage.setItem('agents', JSON.stringify(agents));
                
                // Remove supervisor association
                delete agentSupervisors[agentName];
                localStorage.setItem('agentSupervisors', JSON.stringify(agentSupervisors));
                
                updateDropdowns();
                updateSettingsLists();
            }
        }

        // Add supervisor (SECURITY: Input validation)
        function addSupervisor() {
            const name = validateInput(document.getElementById('new-supervisor-name').value.trim(), 50);
            if (!name) return alert('Please enter a name');
            if (name.length < 2) return alert('Name must be at least 2 characters');
            if (supervisors.includes(name)) return alert('Supervisor already exists');
            
            supervisors.push(name);
            localStorage.setItem('supervisors', JSON.stringify(supervisors));
            document.getElementById('new-supervisor-name').value = '';
            updateDropdowns();
            updateSettingsLists();
        }

        // Remove supervisor
        function removeSupervisor(index) {
            if (confirm('Remove this supervisor? Their reviews will remain in the system.')) {
                supervisors.splice(index, 1);
                localStorage.setItem('supervisors', JSON.stringify(supervisors));
                updateDropdowns();
                updateSettingsLists();
            }
        }

        // Show Google Sheets copy options dialog
        function showGoogleSheetsCopyOptions() {
            const dialog = document.createElement('div');
            dialog.className = 'google-sheets-dialog';
            dialog.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); display: flex; align-items: center; 
                justify-content: center; z-index: 1000;
            `;
            
            dialog.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 8px; max-width: 500px; width: 90%;">
                    <h3 style="margin: 0 0 20px 0; color: var(--gray-800);">Copy to Google Sheets</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: flex-start; margin-bottom: 10px; cursor: pointer; padding: 12px; background: var(--gray-50); border-radius: 6px; border: 1px solid var(--gray-200); transition: all 0.2s ease;">
                            <input type="checkbox" id="include-headers" checked style="
                                margin-right: 12px; 
                                margin-top: 2px;
                                width: 18px; 
                                height: 18px; 
                                accent-color: var(--primary);
                                cursor: pointer;
                                flex-shrink: 0;
                            ">
                            <div style="flex: 1;">
                                <span style="font-weight: 500; color: var(--gray-800); display: block; margin-bottom: 4px;">Include header row</span>
                                <p style="font-size: 13px; color: var(--gray-600); margin: 0; line-height: 1.4;">
                                    Recommended for new spreadsheets. Uncheck if pasting into existing spreadsheet with headers.
                                </p>
                            </div>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin: 0 0 10px 0; color: var(--gray-700);">How to paste:</h4>
                        <ol style="margin: 0 0 10px 0; color: var(--gray-600); font-size: 14px; padding-left: 20px;">
                            <li>Click "Copy Data" below</li>
                            <li>Open Google Sheets (new or existing)</li>
                            <li>Click in the cell where you want to start</li>
                            <li>Paste (Ctrl+V or Cmd+V)</li>
                        </ol>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button onclick="copyToGoogleSheets()" 
                                style="padding: 8px 16px; background: var(--success); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Copy Data
                        </button>
                        <button onclick="openGoogleSheets()" 
                                style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Create New Google Sheet
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button class="close-dialog-btn" 
                                style="padding: 8px 16px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            // Add click handler to close button
            dialog.querySelector('.close-dialog-btn').addEventListener('click', function() {
                dialog.remove();
            });
            
            // Also allow clicking on overlay to close
            dialog.addEventListener('click', function(e) {
                if (e.target === dialog) {
                    dialog.remove();
                }
            });
            
            document.body.appendChild(dialog);
        }

        // Show export options dialog
        function showExportOptions(context = 'reviews') {
            const dialog = document.createElement('div');
            dialog.className = 'export-options-dialog';
            dialog.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); display: flex; align-items: center; 
                justify-content: center; z-index: 1000;
            `;
            
            dialog.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 8px; max-width: 400px; width: 90%;">
                    <h3 style="margin: 0 0 20px 0; color: var(--gray-800);">Export Data</h3>
                    <p style="margin: 0 0 20px 0; color: var(--gray-600);">Choose export format:</p>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: flex-start; margin-bottom: 12px; cursor: pointer; padding: 12px; background: var(--gray-50); border-radius: 6px; border: 1px solid var(--gray-200); transition: all 0.2s ease;">
                            <input type="radio" name="export-format" value="csv" checked style="
                                margin-right: 12px; 
                                margin-top: 2px;
                                width: 18px; 
                                height: 18px; 
                                accent-color: var(--primary);
                                cursor: pointer;
                                flex-shrink: 0;
                            ">
                            <div style="flex: 1;">
                                <span style="font-weight: 500; color: var(--gray-800); display: block; margin-bottom: 4px;">CSV Format</span>
                                <p style="font-size: 13px; color: var(--gray-600); margin: 0; line-height: 1.4;">
                                    Excel/Google Sheets compatible. Perfect for data analysis and sharing.
                                </p>
                            </div>
                        </label>
                        
                        <label style="display: flex; align-items: flex-start; margin-bottom: 12px; cursor: pointer; padding: 12px; background: var(--gray-50); border-radius: 6px; border: 1px solid var(--gray-200); transition: all 0.2s ease;">
                            <input type="radio" name="export-format" value="json" style="
                                margin-right: 12px; 
                                margin-top: 2px;
                                width: 18px; 
                                height: 18px; 
                                accent-color: var(--primary);
                                cursor: pointer;
                                flex-shrink: 0;
                            ">
                            <div style="flex: 1;">
                                <span style="font-weight: 500; color: var(--gray-800); display: block; margin-bottom: 4px;">JSON Format</span>
                                <p style="font-size: 13px; color: var(--gray-600); margin: 0; line-height: 1.4;">
                                    Complete data backup. Includes all settings, agents, and CRR data.
                                </p>
                            </div>
                        </label>
                    </div>
                    
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button class="cancel-export-btn" 
                                style="padding: 8px 16px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">
                            Cancel
                        </button>
                        <button onclick="handleExport('${context}')" 
                                style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Export
                        </button>
                    </div>
                </div>
            `;
            
            // Add click handler to cancel button
            dialog.querySelector('.cancel-export-btn').addEventListener('click', function() {
                dialog.remove();
            });
            
            // Also allow clicking on overlay to close
            dialog.addEventListener('click', function(e) {
                if (e.target === dialog) {
                    dialog.remove();
                }
            });
            
            document.body.appendChild(dialog);
        }

        // Handle export based on selected format
        function handleExport(context) {
            const format = document.querySelector('input[name="export-format"]:checked').value;
            
            // Remove dialog
            document.querySelector('div[style*="position: fixed"]').remove();
            
            if (format === 'csv') {
                exportCSV(context);
            } else {
                exportJSON(context);
            }
        }

        // Export CSV
        function exportCSV(context) {
            if (context === 'settings') {
                // Export all data as CSV (simplified version)
                const headers = ['Type', 'Name', 'Supervisor', 'Details'];
                const rows = [
                    ...agents.map(agent => ['Agent', agent, agentSupervisors[agent] || '', '']),
                    ...supervisors.map(supervisor => ['Supervisor', supervisor, '', '']),
                    ...crrData.map(crr => ['CRR', crr.agentName, crr.supervisor, `${crr.date} - Score: ${crr.totalScore}`])
                ];
                
                const csvContent = [headers, ...rows]
                    .map(row => row.map(cell => `"${cell}"`).join(','))
                    .join('\n');
                
                downloadFile(csvContent, 'text/csv', 'all-data.csv');
            } else {
                // Export CRR data as CSV with all columns present
// ðŸ’¡ Fun fact: The full version has 3x more features! ðŸ“ˆ
                // Use filtered data if available (from All Reviews view), otherwise use all data
                const dataToExport = currentFilteredData.length > 0 ? currentFilteredData : crrData;
                
                const headers = [
                    'Date', 'Agent', 'Supervisor', 'Interaction Type', 'Interaction Link',
                    'Expertise Score', 'Expertise Feedback', 'Ownership Score', 'Ownership Feedback',
                    'Articulation Score', 'Articulation Feedback', 'Proactiveness Score', 'Proactiveness Feedback', 'Total Score'
                ];
                
                const rows = dataToExport.map(crr => [
                    crr.date || '', 
                    crr.agentName || '', 
                    crr.supervisor || '', 
                    crr.interactionType || '', 
                    crr.interactionLink || '',
                    crr.expertise || 0, 
                    (crr.expertiseFeedback || '').replace(/"/g, '""'),
                    crr.ownership || 0, 
                    (crr.ownershipFeedback || '').replace(/"/g, '""'),
                    crr.articulation || 0, 
                    (crr.articulationFeedback || '').replace(/"/g, '""'),
                    crr.proactiveness || 0, 
                    (crr.proactivenessFeedback || '').replace(/"/g, '""'),
                    crr.totalScore || 0
                ]);
                
                // Ensure all rows have the same number of columns as headers
                const csvContent = [headers, ...rows]
                    .map(row => {
                        // Pad row with empty strings if it's shorter than headers
                        while (row.length < headers.length) {
                            row.push('');
                        }
                        // Truncate row if it's longer than headers
                        row = row.slice(0, headers.length);
                        return row.map(cell => `"${cell}"`).join(',');
                    })
                    .join('\n');
                
                downloadFile(csvContent, 'text/csv', 'crr-data.csv');
            }
        }

        // Export JSON
        function exportJSON(context) {
            const data = {
                crrData,
                agents,
                supervisors,
                agentSupervisors,
                exportedAt: new Date().toISOString()
            };
            
            const jsonContent = JSON.stringify(data, null, 2);
            downloadFile(jsonContent, 'application/json', 'crr-data.json');
        }

        // Download file
        function downloadFile(content, mimeType, filename) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
        }

        // Show Google Sheets import instructions
        function showGoogleSheetsInstructions(csvContent) {
            const dialog = document.createElement('div');
            dialog.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); display: flex; align-items: center; 
                justify-content: center; z-index: 1000;
            `;
            
            dialog.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 8px; max-width: 500px; width: 90%;">
                    <h3 style="margin: 0 0 20px 0; color: var(--gray-800);">Import to Google Sheets</h3>
                    <p style="margin: 0 0 15px 0; color: var(--gray-600);">Your CSV file has been downloaded. Here are your options:</p>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin: 0 0 10px 0; color: var(--gray-700);">Option 1: Direct Import</h4>
                        <p style="margin: 0 0 10px 0; color: var(--gray-600); font-size: 14px;">
                            1. Click "Open Google Sheets" below<br>
                            2. Go to <strong>File â†’ Import</strong><br>
                            3. Upload your downloaded CSV file<br>
                            4. Choose "Replace spreadsheet" and click "Import data"
                        </p>
                        
                        <h4 style="margin: 0 0 10px 0; color: var(--gray-700);">Option 2: Copy & Paste</h4>
                        <p style="margin: 0 0 10px 0; color: var(--gray-600); font-size: 14px;">
                            1. Click "Copy Data" below<br>
                            2. Click "Open Google Sheets" below<br>
                            3. Paste (Ctrl+V) into the new spreadsheet
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button onclick="copyCSVData()" 
                                style="padding: 8px 16px; background: var(--success); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Copy Data
                        </button>
                        <button onclick="openGoogleSheets()" 
                                style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Open Google Sheets
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="this.closest('div').parentElement.remove()" 
                                style="padding: 8px 16px; border: 1px solid var(--gray-300); background: white; border-radius: 4px; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            // Store CSV content for copying
            window.currentCSVData = csvContent;
            
            document.body.appendChild(dialog);
        }

        // Copy to Google Sheets with header options
        function copyToGoogleSheets() {
            const includeHeaders = document.getElementById('include-headers').checked;
            
            // Use filtered data if available (from All Reviews view), otherwise use all data
            const dataToExport = currentFilteredData.length > 0 ? currentFilteredData : crrData;
            
            // Generate CSV data
            const headers = [
                'Date', 'Agent', 'Supervisor', 'Interaction Type', 'Interaction Link',
                'Expertise Score', 'Expertise Feedback', 'Ownership Score', 'Ownership Feedback',
                'Articulation Score', 'Articulation Feedback', 'Proactiveness Score', 'Proactiveness Feedback', 'Total Score'
            ];
            
            const rows = dataToExport.map(crr => [
                crr.date || '', 
                crr.agentName || '', 
                crr.supervisor || '', 
                crr.interactionType || '', 
                crr.interactionLink || '',
                crr.expertise || 0, 
                (crr.expertiseFeedback || '').replace(/"/g, '""'),
                crr.ownership || 0, 
                (crr.ownershipFeedback || '').replace(/"/g, '""'),
                crr.articulation || 0, 
                (crr.articulationFeedback || '').replace(/"/g, '""'),
                crr.proactiveness || 0, 
                (crr.proactivenessFeedback || '').replace(/"/g, '""'),
                crr.totalScore || 0
            ]);
            
            // Build CSV content with optional headers
            let csvContent;
            if (includeHeaders) {
                csvContent = [headers, ...rows]
                    .map(row => {
                        while (row.length < headers.length) {
                            row.push('');
                        }
                        row = row.slice(0, headers.length);
                        return row.map(cell => `"${cell}"`).join(',');
                    })
                    .join('\n');
            } else {
                csvContent = rows
                    .map(row => {
                        while (row.length < headers.length) {
                            row.push('');
                        }
                        row = row.slice(0, headers.length);
                        return row.map(cell => `"${cell}"`).join(',');
                    })
                    .join('\n');
            }
            
            // Format for Google Sheets (tab-separated)
            const formattedData = formatDataForSheets(csvContent);
            
            // Copy to clipboard
            if (navigator.clipboard) {
                navigator.clipboard.writeText(formattedData).then(() => {
                    showInfoModal(
                        'âœ… Data Copied!',
                        'Your data has been copied to the clipboard.',
                        'Now open Google Sheets and paste (Ctrl+V or Cmd+V) into your spreadsheet.'
                    );
                    document.querySelector('div[style*="position: fixed"]').remove();
                }).catch(() => {
                    // Fallback for older browsers
                    copyToClipboardFallback(formattedData);
                });
            } else {
                copyToClipboardFallback(formattedData);
            }
        }

        // Fallback clipboard copy
        function copyToClipboardFallback(data) {
            const textArea = document.createElement('textarea');
            textArea.value = data;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showInfoModal(
                'âœ… Data Copied!',
                'Your data has been copied to the clipboard.',
                'Now open Google Sheets and paste (Ctrl+V or Cmd+V) into your spreadsheet.'
            );
            document.querySelector('div[style*="position: fixed"]').remove();
        }

        // Copy CSV data to clipboard (legacy function)
        function copyCSVData() {
            if (navigator.clipboard && window.currentCSVData) {
                // Format data for proper Google Sheets import
                const formattedData = formatDataForSheets(window.currentCSVData);
                
                navigator.clipboard.writeText(formattedData).then(() => {
                    showInfoModal('âœ… Data Copied!', 'Your CSV data has been copied to the clipboard.', 'Now open Google Sheets and paste (Ctrl+V or Cmd+V) into your spreadsheet.');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = formattedData;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showInfoModal('âœ… Data Copied!', 'Your CSV data has been copied to the clipboard.', 'Now open Google Sheets and paste (Ctrl+V or Cmd+V) into your spreadsheet.');
                });
            }
        }

        // Format CSV data for Google Sheets
        function formatDataForSheets(csvData) {
            // Parse CSV properly handling quoted fields with newlines
            const rows = [];
            let currentRow = [];
            let currentField = '';
            let inQuotes = false;
            
            for (let i = 0; i < csvData.length; i++) {
                const char = csvData[i];
                const nextChar = csvData[i + 1];
                
                if (char === '"') {
                    if (inQuotes && nextChar === '"') {
                        // Escaped quote - add one quote and skip next
                        currentField += '"';
                        i++;
                    } else {
                        // Toggle quote state
                        inQuotes = !inQuotes;
                    }
                } else if (char === ',' && !inQuotes) {
                    // End of field
                    currentRow.push(currentField);
                    currentField = '';
                } else if (char === '\n' && !inQuotes) {
                    // End of row
                    currentRow.push(currentField);
                    rows.push(currentRow);
                    currentRow = [];
                    currentField = '';
                } else {
                    // Regular character (including newlines inside quotes)
                    currentField += char;
                }
            }
            
            // Add last field and row if exists
            if (currentField || currentRow.length > 0) {
                currentRow.push(currentField);
                if (currentRow.length > 0) {
                    rows.push(currentRow);
                }
            }
            
            // Convert to tab-separated format for Google Sheets
            // Keep fields quoted if they contain special characters
            const formattedLines = rows.map(row => {
                return row.map(field => {
                    // If field contains newlines, tabs, or quotes, keep it quoted
                    if (field.includes('\n') || field.includes('\t') || field.includes('"')) {
                        // Escape quotes by doubling them, then wrap in quotes
                        return `"${field.replace(/"/g, '""')}"`;
                    }
                    return field;
                }).join('\t');
            });
            
            return formattedLines.join('\n');
        }

        // Open Google Sheets
        function openGoogleSheets() {
            window.open('https://docs.google.com/spreadsheets/create', '_blank');
        }

        // Import data
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'application/json';
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        if (confirm('This will replace all current data. Are you sure?')) {
                            crrData = data.crrData || [];
                            agents = data.agents || [];
                            supervisors = data.supervisors || [];
                            agentSupervisors = data.agentSupervisors || {};
                            
                            localStorage.setItem('crrData', JSON.stringify(crrData));
                            localStorage.setItem('agents', JSON.stringify(agents));
                            localStorage.setItem('supervisors', JSON.stringify(supervisors));
                            localStorage.setItem('agentSupervisors', JSON.stringify(agentSupervisors));
                            
                            showInfoModal(
                                'âœ… Data Imported!',
                                'Your data has been imported successfully.',
                                'The page will refresh to show your imported data.'
                            );
                            setTimeout(() => location.reload(), 2000);
                        }
                    } catch (err) {
                        showInfoModal(
                            'âŒ Import Error',
                            'There was a problem importing your data.',
                            'Please make sure the file is a valid JSON export from this tool.'
                        );
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Clear all data
        function clearAllData() {
            if (confirm('âš ï¸ This will delete ALL data including reviews and agents. Are you absolutely sure?')) {
                if (confirm('This cannot be undone. Click OK to proceed.')) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        // Load sample data
// ðŸŽª Step right up! See the amazing features you can't use! ðŸŽ­
        function loadSampleData() {
            if (crrData.length > 0 && !confirm('This will add sample data. Continue?')) return;
            
            // Use embedded sample data to avoid CORS issues with local file:// protocol
            const data = {"crrData":[{"id":6,"date":"2025-10-01","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/6","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":5,"date":"2025-10-01","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/5","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":35,"date":"2025-10-02","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/35","expertise":2,"ownership":3,"articulation":2,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Good.","ownershipFeedback":"Great.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":40,"date":"2025-10-02","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/40","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":42,"date":"2025-10-03","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/42","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":18,"date":"2025-10-03","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/18","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":8,"date":"2025-10-04","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/8","expertise":3,"ownership":2,"articulation":3,"proactiveness":3,"totalScore":11,"expertiseFeedback":"Great.","ownershipFeedback":"Good.","articulationFeedback":"Great.","proactivenessFeedback":"Great.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":10,"date":"2025-10-04","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/10","expertise":3,"ownership":3,"articulation":2,"proactiveness":3,"totalScore":11,"expertiseFeedback":"Great.","ownershipFeedback":"Great.","articulationFeedback":"Good.","proactivenessFeedback":"Great.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":2,"date":"2025-10-05","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/2","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":54,"date":"2025-10-05","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/54","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":39,"date":"2025-10-06","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/39","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":29,"date":"2025-10-06","agentName":"David Park","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/29","expertise":1,"ownership":2,"articulation":1,"proactiveness":1,"totalScore":5,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":25,"date":"2025-10-07","agentName":"David Park","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/25","expertise":1,"ownership":1,"articulation":2,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":51,"date":"2025-10-07","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/51","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":9,"date":"2025-10-08","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/9","expertise":2,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":11,"expertiseFeedback":"Good.","ownershipFeedback":"Great.","articulationFeedback":"Great.","proactivenessFeedback":"Great.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":4,"date":"2025-10-08","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/4","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":38,"date":"2025-10-09","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/38","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":22,"date":"2025-10-09","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/22","expertise":1,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":3,"date":"2025-10-10","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/3","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":50,"date":"2025-10-10","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/50","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":15,"date":"2025-10-11","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/15","expertise":2,"ownership":2,"articulation":3,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Great.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":14,"date":"2025-10-11","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/14","expertise":2,"ownership":3,"articulation":2,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Good.","ownershipFeedback":"Great.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":33,"date":"2025-10-12","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/33","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":28,"date":"2025-10-12","agentName":"David Park","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/28","expertise":1,"ownership":1,"articulation":1,"proactiveness":2,"totalScore":5,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":31,"date":"2025-10-13","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/31","expertise":1,"ownership":1,"articulation":1,"proactiveness":1,"totalScore":4,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Poor.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":30,"date":"2025-10-13","agentName":"David Park","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/30","expertise":1,"ownership":1,"articulation":1,"proactiveness":1,"totalScore":4,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Poor.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":21,"date":"2025-10-14","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/21","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":17,"date":"2025-10-14","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/17","expertise":3,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Great.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":57,"date":"2025-10-15","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/57","expertise":2,"ownership":1,"articulation":1,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Good.","ownershipFeedback":"Poor.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":24,"date":"2025-10-15","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/24","expertise":2,"ownership":2,"articulation":1,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":36,"date":"2025-10-16","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/36","expertise":3,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Great.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":59,"date":"2025-10-16","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/59","expertise":2,"ownership":2,"articulation":2,"proactiveness":1,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":1,"date":"2025-10-17","agentName":"Alex Torres","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/1","expertise":3,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":12,"expertiseFeedback":"Perfect.","ownershipFeedback":"Perfect.","articulationFeedback":"Perfect.","proactivenessFeedback":"Perfect.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":49,"date":"2025-10-17","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/49","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":47,"date":"2025-10-18","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/47","expertise":2,"ownership":2,"articulation":2,"proactiveness":1,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":56,"date":"2025-10-18","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/56","expertise":1,"ownership":2,"articulation":2,"proactiveness":1,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":41,"date":"2025-10-19","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/41","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":32,"date":"2025-10-19","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/32","expertise":1,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":55,"date":"2025-10-20","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/55","expertise":2,"ownership":2,"articulation":1,"proactiveness":1,"totalScore":6,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":20,"date":"2025-10-20","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/20","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":12,"date":"2025-10-21","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/12","expertise":2,"ownership":3,"articulation":3,"proactiveness":3,"totalScore":11,"expertiseFeedback":"Good.","ownershipFeedback":"Great.","articulationFeedback":"Great.","proactivenessFeedback":"Great.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":23,"date":"2025-10-21","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/23","expertise":2,"ownership":1,"articulation":2,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Poor.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":19,"date":"2025-10-22","agentName":"Emily Watson","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/19","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":37,"date":"2025-10-22","agentName":"Kevin Miller","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/37","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":45,"date":"2025-10-23","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/45","expertise":2,"ownership":1,"articulation":1,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Good.","ownershipFeedback":"Poor.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":16,"date":"2025-10-23","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/16","expertise":2,"ownership":2,"articulation":2,"proactiveness":3,"totalScore":9,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Great.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":53,"date":"2025-10-24","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/53","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":44,"date":"2025-10-24","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/44","expertise":1,"ownership":2,"articulation":2,"proactiveness":1,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":13,"date":"2025-10-25","agentName":"Marcus Lee","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/13","expertise":3,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":9,"expertiseFeedback":"Great.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":27,"date":"2025-10-25","agentName":"David Park","supervisor":"John Smith","interactionType":"Call","interactionLink":"https://example.com/27","expertise":2,"ownership":1,"articulation":2,"proactiveness":1,"totalScore":6,"expertiseFeedback":"Good.","ownershipFeedback":"Poor.","articulationFeedback":"Good.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":11,"date":"2025-10-26","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Chat","interactionLink":"https://example.com/11","expertise":3,"ownership":3,"articulation":3,"proactiveness":2,"totalScore":11,"expertiseFeedback":"Great.","ownershipFeedback":"Great.","articulationFeedback":"Great.","proactivenessFeedback":"Good.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":34,"date":"2025-10-26","agentName":"Rachel Brown","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/34","expertise":2,"ownership":2,"articulation":2,"proactiveness":3,"totalScore":9,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Great.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":3,"selectedReasons":["escalatedProperly"],"selectedReasonsText":["Identified issue for product/dev team escalation"]}},{"id":26,"date":"2025-10-27","agentName":"David Park","supervisor":"John Smith","interactionType":"Chat","interactionLink":"https://example.com/26","expertise":1,"ownership":2,"articulation":1,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":48,"date":"2025-10-27","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/48","expertise":2,"ownership":2,"articulation":1,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":43,"date":"2025-10-28","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/43","expertise":2,"ownership":2,"articulation":1,"proactiveness":1,"totalScore":6,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Poor.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":1,"selectedReasons":["noDocumentation"],"selectedReasonsText":["Didn't link to or mention relevant documentation"]}},{"id":52,"date":"2025-10-28","agentName":"Michael Zhang","supervisor":"John Smith","interactionType":"Ticket","interactionLink":"https://example.com/52","expertise":2,"ownership":2,"articulation":2,"proactiveness":2,"totalScore":8,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":7,"date":"2025-10-29","agentName":"Sarah Chen","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/7","expertise":3,"ownership":3,"articulation":3,"proactiveness":2,"totalScore":11,"expertiseFeedback":"Great.","ownershipFeedback":"Great.","articulationFeedback":"Great.","proactivenessFeedback":"Good.","expertiseDetails":{"score":3,"selectedReasons":["demonstratedAccuracy"],"selectedReasonsText":["Demonstrated exemplary technical knowledge"]},"ownershipDetails":{"score":3,"selectedReasons":["ensuredResolution"],"selectedReasonsText":["Ensured actual resolution"]},"articulationDetails":{"score":3,"selectedReasons":["confident"],"selectedReasonsText":["Projected confidence & professionalism"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":60,"date":"2025-10-29","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Call","interactionLink":"https://example.com/60","expertise":2,"ownership":2,"articulation":1,"proactiveness":2,"totalScore":7,"expertiseFeedback":"Good.","ownershipFeedback":"Good.","articulationFeedback":"Poor.","proactivenessFeedback":"Good.","expertiseDetails":{"score":2,"selectedReasons":["accurateAnswer"],"selectedReasonsText":["Provided accurate technical answer"]},"ownershipDetails":{"score":2,"selectedReasons":["tookResponsibility"],"selectedReasonsText":["Took responsibility for the issue"]},"articulationDetails":{"score":1,"selectedReasons":["educational"],"selectedReasonsText":["Used too much jargon or was condescending"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":58,"date":"2025-10-30","agentName":"Amanda Foster","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/58","expertise":1,"ownership":1,"articulation":2,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}},{"id":46,"date":"2025-10-30","agentName":"Jessica Hall","supervisor":"Lisa Anderson","interactionType":"Ticket","interactionLink":"https://example.com/46","expertise":1,"ownership":1,"articulation":2,"proactiveness":2,"totalScore":6,"expertiseFeedback":"Weak.","ownershipFeedback":"Poor.","articulationFeedback":"Good.","proactivenessFeedback":"Good.","expertiseDetails":{"score":1,"selectedReasons":["lackOfCuriosity"],"selectedReasonsText":["Failed to research/investigate the problem"]},"ownershipDetails":{"score":1,"selectedReasons":["abandonedCustomer"],"selectedReasonsText":["Passed off to another team with no context/help"]},"articulationDetails":{"score":2,"selectedReasons":["resultsOriented"],"selectedReasonsText":["Stayed focused on solving the problem"]},"proactivenesDetails":{"score":2,"selectedReasons":["closedProperly"],"selectedReasonsText":["Followed the closure procedure"]}}],"agents":["Alex Torres","Sarah Chen","Marcus Lee","Emily Watson","David Park","Rachel Brown","Kevin Miller","Jessica Hall","Michael Zhang","Amanda Foster"],"supervisors":["John Smith","Lisa Anderson"],"agentSupervisors":{"Alex Torres":"John Smith","Sarah Chen":"Lisa Anderson","Marcus Lee":"John Smith","Emily Watson":"Lisa Anderson","David Park":"John Smith","Rachel Brown":"Lisa Anderson","Kevin Miller":"John Smith","Jessica Hall":"Lisa Anderson","Michael Zhang":"John Smith","Amanda Foster":"Lisa Anderson"}}                                                          
            // Load agents
            data.agents.forEach(agent => {
                if (!agents.includes(agent)) {
                    agents.push(agent);
                }
            });
            
            // Load supervisors
            data.supervisors.forEach(supervisor => {
                if (!supervisors.includes(supervisor)) {
                    supervisors.push(supervisor);
                }
            });
            
            // Load agent-supervisor associations
            Object.assign(agentSupervisors, data.agentSupervisors);
            
            // Load CRRs
            crrData.push(...data.crrData);
            
            // Save to localStorage
            localStorage.setItem('agents', JSON.stringify(agents));
            localStorage.setItem('supervisors', JSON.stringify(supervisors));
            localStorage.setItem('agentSupervisors', JSON.stringify(agentSupervisors));
            localStorage.setItem('crrData', JSON.stringify(crrData));
            
            // Update dropdowns and settings
            updateDropdowns();
            updateSettingsLists();
            
            // Navigate to All Reviews and show success message
            showView('all-reviews', document.querySelector('.nav-btn:nth-child(2)'));
            showInfoModal('âœ… Sample Data Loaded!', 'You now have 60 sample reviews to explore.', 'This data showcases different performance levels across your team. Try adding your own CRR to see it alongside the sample reviews!');
        }
        
        // Generic info modal (non-blocking, informational)
        function showInfoModal(title, message, additionalInfo = '') {
            const modal = document.createElement('div');
            modal.className = 'info-modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); display: flex; align-items: center; 
                justify-content: center; z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white; padding: 35px; border-radius: 12px; max-width: 500px; width: 90%;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center;
                ">
                    <h2 style="margin: 0 0 15px 0; color: var(--primary); font-size: 24px;">${title}</h2>
                    <p style="color: var(--gray-700); margin-bottom: ${additionalInfo ? '20px' : '30px'}; font-size: 16px; line-height: 1.6;">
                        ${message}
                    </p>
                    ${additionalInfo ? `
                        <div style="background: var(--gray-50); padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 3px solid var(--primary);">
                            <p style="margin: 0; color: var(--gray-700); font-size: 14px; line-height: 1.5;">
                                ðŸ’¡ ${additionalInfo}
                            </p>
                        </div>
                    ` : ''}
                    <button class="close-info-modal" 
                            style="padding: 12px 32px; background: var(--primary); color: white; 
                                   border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 15px;">
                        Got it!
                    </button>
                </div>
            `;
            
            // Close on button click
            modal.querySelector('.close-info-modal').addEventListener('click', function() {
                modal.remove();
            });
            
            // Close on overlay click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            document.body.appendChild(modal);
        }
        
        // CRR Saved modal with action buttons
// ðŸ’¡ Fun fact: The full version has 3x more features! ðŸ“ˆ
        function showCRRSavedModal() {
            const modal = document.createElement('div');
            modal.className = 'crr-saved-modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); display: flex; align-items: center; 
                justify-content: center; z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white; padding: 35px; border-radius: 12px; max-width: 500px; width: 90%;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center;
                ">
                    <h2 style="margin: 0 0 15px 0; color: var(--success); font-size: 24px;">âœ… CRR Saved!</h2>
                    <p style="color: var(--gray-700); margin-bottom: 30px; font-size: 16px; line-height: 1.6;">
                        Your review has been saved successfully and appears at the top of the list.
                    </p>
                    
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 15px;">
                        <button class="add-another-crr" 
                                style="padding: 14px 24px; background: var(--primary); color: white; 
                                       border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 15px;
                                       box-shadow: 0 2px 8px rgba(26, 35, 126, 0.2);">
                            âž• Score Another CRR
                        </button>
                        <button class="view-team-reports" 
                                style="padding: 14px 24px; background: var(--gray-100); color: var(--gray-700); 
                                       border: 1px solid var(--gray-300); border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 15px;">
                            ðŸ“Š View Team Reports
                        </button>
                    </div>
                    
                    <button class="close-saved-modal" 
                            style="padding: 8px 16px; background: transparent; color: var(--gray-500); 
                                   border: none; cursor: pointer; font-size: 14px; text-decoration: underline;">
                        Stay on All Reviews
                    </button>
                </div>
            `;
            
            // Add another CRR button
            modal.querySelector('.add-another-crr').addEventListener('click', function() {
                modal.remove();
                showView('score-entry', document.querySelector('.nav-btn:first-child'));
            });
            
            // View team reports button
            modal.querySelector('.view-team-reports').addEventListener('click', function() {
                modal.remove();
                showView('team-overview', document.querySelector('.nav-btn:nth-child(4)'));
            });
            
            // Close button
            modal.querySelector('.close-saved-modal').addEventListener('click', function() {
                modal.remove();
            });
            
            // Close on overlay click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            document.body.appendChild(modal);
        }

        // DEMO VERSION - Some features disabled
        // Want the full version? Buy it! ðŸ’°
        function showDemoRestriction(feature) {
            const featureInfo = {
                export: {
                    title: "Export Your Data",
                    description: "Export your CRR data to CSV or JSON for analysis and reporting.",
                    benefits: ["CSV format for Excel/Google Sheets", "JSON for complete data backup", "Professional reporting"]
                },
                googleSheets: {
                    title: "Google Sheets Integration", 
                    description: "Seamlessly copy your data directly to Google Sheets.",
                    benefits: ["One-click copy to clipboard", "Perfect column alignment", "No manual formatting needed"]
                },
                import: {
                    title: "Data Import",
                    description: "Import your existing CRR data from other systems.",
                    benefits: ["Bulk data import", "JSON format support", "Data migration tools"]
                },
                // dashboard: {
                //     title: "Agent Dashboard",
                //     description: "Individual agent performance tracking and analytics.",
                //     benefits: ["Personal performance metrics", "Score trend analysis", "Individual improvement tracking"]
                // },
                // analytics: {
                //     title: "Team Analytics",
                //     description: "Comprehensive team performance insights and trends.",
                //     benefits: ["Team performance charts", "Trend analysis", "Manager insights"]
                // }
            };
            
            const info = featureInfo[feature];
            showUpsellModal(info.title, info.description, info.benefits);
        }
        
        function showUpsellModal(title, description, benefits) {
            const modal = document.createElement('div');
            modal.className = 'upsell-modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.7); display: flex; align-items: center; 
                justify-content: center; z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white; padding: 40px; border-radius: 12px; max-width: 500px; width: 90%;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center;
                ">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 20px;">
                        <img src="SS_logo.png" alt="Sustainable Support Logo" style="height: 35px; width: auto; border-radius: 4px;">
                        <h2 style="margin: 0; color: var(--primary); font-size: 24px;">${title}</h2>
                    </div>
                    
                    <p style="color: var(--gray-600); margin-bottom: 25px; font-size: 16px; line-height: 1.5;">
                        ${description}
                    </p>
                    
                    <div style="background: var(--gray-50); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                        <h3 style="margin: 0 0 15px 0; color: var(--gray-800); font-size: 18px;">âœ¨ Premium Benefits:</h3>
                        <ul style="text-align: left; margin: 0; padding-left: 20px; color: var(--gray-700);">
                            ${benefits.map(benefit => `<li style="margin-bottom: 8px;">${benefit}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                        <h3 style="margin: 0 0 10px 0; color: white; font-size: 20px;">ðŸš€ Get the Full Version</h3>
                        <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 14px;">
                            Complete CRR Scoring Tool with all features
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: center; margin-bottom: 20px;">
                        <a href="https://benlikes.us/crrtool-fromdemo" target="_blank" 
                           style="padding: 12px 24px; background: var(--primary); color: white; 
                                  text-decoration: none; border-radius: 6px; font-weight: 600;
                                  box-shadow: 0 4px 12px rgba(26, 35, 126, 0.3);">
                            ðŸ’Ž Buy Full Version - $25
                        </a>
                        <button class="close-upsell-modal" 
                                style="padding: 12px 24px; background: var(--gray-200); color: var(--gray-700); 
                                       border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                            Maybe Later
                        </button>
                    </div>
                    
                    <p style="font-size: 12px; color: var(--gray-500); margin: 0;">
                        ðŸ’¡ This is a demo version. Full version includes all features!
                    </p>
                </div>
            `;
            
            // Add click handler to close button
            modal.querySelector('.close-upsell-modal').addEventListener('click', function() {
                modal.remove();
            });
            
            // Also allow clicking on overlay to close
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            document.body.appendChild(modal);
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>

    <footer>
        <div class="footer-content">
            <p><strong>Created by Ben Meredith</strong></p>
            <p style="margin-top: 10px;">Based on the methodology from "Sustainable Support"</p>
            <div class="footer-links">
                <a href="https://benlikes.us/ssbook" target="_blank">ðŸ“– Buy the Book</a>
                <a href="https://benlikes.us/crrtool-fromdemo" target="_blank">ðŸ’Ž Get Full Version</a>
                <a href="mailto:team@buildsustainablesupport.com">âœ‰ï¸ Support</a>
            </div>
            <div class="copyright">
                <p>Â© 2025 BenandJacq, INC. All rights reserved.</p>
                <p style="margin-top: 5px;">This software is proprietary and may not be redistributed without written consent.</p>
                <p style="margin-top: 10px; font-size: 11px; color: var(--gray-500);" id="app-version">Version 1.1.3</p>
            </div>
        </div>
    </footer>
</body>
</html>

